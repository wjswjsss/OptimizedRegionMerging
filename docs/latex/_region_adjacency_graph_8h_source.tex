\doxysection{Region\+Adjacency\+Graph.\+h}
\hypertarget{_region_adjacency_graph_8h_source}{}\label{_region_adjacency_graph_8h_source}\index{include/RegionAdjacencyGraph.h@{include/RegionAdjacencyGraph.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#include\ <type\_traits>}}
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ <chrono>}}
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ <queue>}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ <limits.h>}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ <future>}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ <shared\_mutex>}}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ "{}Vertex.h"{}}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ "{}Edge.h"{}}}
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include\ "{}NNG.h"{}}}
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#include\ "{}Cluster.h"{}}}
\DoxyCodeLine{00012\ }
\DoxyCodeLine{00013\ \textcolor{preprocessor}{\#define\ RED\_TEXT\ "{}\(\backslash\)033[31m"{}}}
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#define\ GREEN\_TEXT\ "{}\(\backslash\)033[32m"{}}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#define\ RESET\_COLOR\ "{}\(\backslash\)033[0m"{}}}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \textcolor{keyword}{enum\ class}\ RunMode}
\DoxyCodeLine{00018\ \{}
\DoxyCodeLine{00019\ \ \ \ \ None,}
\DoxyCodeLine{00020\ \ \ \ \ Region,}
\DoxyCodeLine{00021\ \ \ \ \ Pruning,}
\DoxyCodeLine{00022\ \ \ \ \ Cycle,}
\DoxyCodeLine{00023\ \ \ \ \ Region\_Pruning,}
\DoxyCodeLine{00024\ \ \ \ \ Region\_Cycle,}
\DoxyCodeLine{00025\ \ \ \ \ Pruning\_Cycle,}
\DoxyCodeLine{00026\ \ \ \ \ Region\_Pruning\_Cycle,}
\DoxyCodeLine{00027\ \ \ \ \ Region\_Pruning\_Cycle\_MultiCores,}
\DoxyCodeLine{00028\ \ \ \ \ Region\_Pruning\_Cycle\_GPU}
\DoxyCodeLine{00029\ \};}
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00031\ \textcolor{comment}{//\ {\ucr}Զ{\ucr}{\ucr}{\ucr}ȽϺ{\ucr}{\ucr}{\ucr}}}
\DoxyCodeLine{00032\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_compare_a_pointers}{CompareAPointers}}}
\DoxyCodeLine{00033\ \{}
\DoxyCodeLine{00034\ \ \ \ \ \textcolor{keywordtype}{bool}\ operator()(\textcolor{keyword}{const}\ \mbox{\hyperlink{class_vertex}{Vertex}}\ *a,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{class_vertex}{Vertex}}\ *b)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00035\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{00036\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ a-\/>edges.size()\ <\ b-\/>edges.size();\ \textcolor{comment}{//\ ע{\ucr}⣺{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}С{\ucr}ںţ{\ucr}{\ucr}{\ucr}Ϊ{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}Ҫ{\ucr}{\ucr}{\ucr}{\ucr}}}
\DoxyCodeLine{00037\ \ \ \ \ \}}
\DoxyCodeLine{00038\ \};}
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00040\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T1,\ \textcolor{keyword}{typename}\ T2,\ \textcolor{keyword}{typename}\ T\_Feature>}
\DoxyCodeLine{00041\ \textcolor{keyword}{class\ }RegionAdjacencyGraph}
\DoxyCodeLine{00042\ \{}
\DoxyCodeLine{00043\ \ \ \ \ \textcolor{keyword}{static\_assert}(std::is\_base\_of\_v<Vertex,\ T1>,\ \textcolor{stringliteral}{"{}T1\ must\ be\ derived\ from\ Vertex\ Class"{}});}
\DoxyCodeLine{00044\ \ \ \ \ \textcolor{keyword}{static\_assert}(std::is\_base\_of\_v<Edge,\ T2>,\ \textcolor{stringliteral}{"{}T2\ must\ be\ derived\ from\ Edge\ Class"{}});}
\DoxyCodeLine{00045\ \ \ \ \ \textcolor{keyword}{static\_assert}(std::is\_base\_of\_v<RootFeatures,\ T\_Feature>,\ \textcolor{stringliteral}{"{}T\_Feature\ must\ be\ derived\ from\ RootFeatures\ Class"{}});}
\DoxyCodeLine{00046\ }
\DoxyCodeLine{00047\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00048\ \ \ \ \ \textcolor{keyword}{typedef}\ void\ (*UpdateFeatures)(T\_Feature\ *,\ T\_Feature\ *,\ T2\ *);}
\DoxyCodeLine{00049\ \ \ \ \ \textcolor{keyword}{typedef}\ double\ (*MergingCriteria)(T\_Feature\ *,\ T\_Feature\ *,\ T2\ *);}
\DoxyCodeLine{00050\ }
\DoxyCodeLine{00051\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00052\ \ \ \ \ RegionAdjacencyGraph(\textcolor{keywordtype}{int}\ vertice\_num,\ \textcolor{keywordtype}{int}\ edge\_num,\ UpdateFeatures\ update\_features,\ MergingCriteria\ MC)\ :\ max\_priqueue(),\ update\_features\_func(update\_features),\ merging\_criteria(MC)}
\DoxyCodeLine{00053\ \ \ \ \ \{}
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ this-\/>vertice\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ this-\/>edges\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ this-\/>nng\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{class_n_n_g}{NNG}}();}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ this-\/>vertice\_num\ =\ vertice\_num;}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ this-\/>edge\_num\ =\ edge\_num;}
\DoxyCodeLine{00059\ \ \ \ \ \};}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00061\ \ \ \ \ RegionAdjacencyGraph()\ :\ max\_priqueue()\ \{}
\DoxyCodeLine{00062\ }
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00065\ \ \ \ \ \string~RegionAdjacencyGraph()}
\DoxyCodeLine{00066\ \ \ \ \ \{}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ \textcolor{keyword}{delete}\ this-\/>nng;}
\DoxyCodeLine{00068\ \ \ \ \ \};}
\DoxyCodeLine{00069\ }
\DoxyCodeLine{00070\ \ \ \ \ T1\ *run(\textcolor{keywordtype}{double}\ threshold,\ RunMode\ mode,\ \textcolor{keywordtype}{int}\ region\_size\ =\ 2500)}
\DoxyCodeLine{00071\ \ \ \ \ \{}
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ T1\ *root\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (mode)}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ RunMode::None:}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \ \ \ \ root\ =\ this-\/>global\_best\_optimization(threshold);}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ RunMode::Region:}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \ \ \ \ root\ =\ this-\/>region\_optimization(threshold,\ region\_size);}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ RunMode::Pruning:}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ \ \ \ \ root\ =\ this-\/>purning\_optimization(threshold);}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ RunMode::Cycle:}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \ \ \ \ root\ =\ this-\/>cycle\_optimization(threshold);}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ RunMode::Region\_Pruning:}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \ \ \ \ root\ =\ this-\/>region\_pruning\_optimization(threshold,\ region\_size);}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ RunMode::Region\_Cycle:}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \ \ \ \ root\ =\ this-\/>region\_cycle\_optimization(threshold,\ region\_size);}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ RunMode::Pruning\_Cycle:}
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ \ \ \ \ root\ =\ this-\/>pruning\_cycle\_optimization(threshold);}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ RunMode::Region\_Pruning\_Cycle:}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \ \ \ \ root\ =\ this-\/>region\_pruning\_cycle\_optimization(threshold,\ region\_size);}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ RunMode::Region\_Pruning\_Cycle\_MultiCores:}
\DoxyCodeLine{00100\ \ \ \ \ \ \ \ \ \ \ \ \ root\ =\ this-\/>region\_pruning\_cycle\_optimization\_MultiCores(threshold,\ region\_size);}
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00102\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ RunMode::Region\_Pruning\_Cycle\_GPU:}
\DoxyCodeLine{00103\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00104\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00106\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00107\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ root;}
\DoxyCodeLine{00108\ \ \ \ \ \}}
\DoxyCodeLine{00109\ }
\DoxyCodeLine{00110\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00111\ \ \ \ \ \textcolor{keywordtype}{void}\ construct\_nng()}
\DoxyCodeLine{00112\ \ \ \ \ \{}
\DoxyCodeLine{00113\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (this-\/>vertice\ ==\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{00114\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ std::runtime\_error(\textcolor{stringliteral}{"{}The\ function\ construct\_nng()\ must\ be\ called\ after\ the\ function\ connect\_vertex\_and\_edge()"{}});}
\DoxyCodeLine{00115\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ start\_time\ =\ std::chrono::high\_resolution\_clock::now();}
\DoxyCodeLine{00116\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (this-\/>nng\ !=\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{00117\ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>nng-\/>clear();}
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ this-\/>edge\_num;\ i++)}
\DoxyCodeLine{00119\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ \ \ \ \ T2\ *e\ =\ \&this-\/>edges[i];}
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ \ \ \ \ e-\/>shortest\_arc\_num\ =\ 0;}
\DoxyCodeLine{00122\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ this-\/>vertice\_num;\ i++)}
\DoxyCodeLine{00124\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ \ \ \ \ T1\ *v\ =\ \&this-\/>vertice[i];}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (v-\/>state\ !=\ State::Freeze)}
\DoxyCodeLine{00127\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00128\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>initial\_direct(v,\ this-\/>edges);}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00130\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00131\ }
\DoxyCodeLine{00132\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ end\_time\ =\ std::chrono::high\_resolution\_clock::now();}
\DoxyCodeLine{00133\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ duration\ =\ std::chrono::duration\_cast<std::chrono::seconds>(end\_time\ -\/\ start\_time);}
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ std::cout\ <<\ "{}vertices{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}:\ "{}\ <<\ RED\_TEXT\ <<\ duration.count()\ <<\ RESET\_COLOR\ <<\ "{}{\ucr}{\ucr}"{}\ <<\ std::endl;}}
\DoxyCodeLine{00135\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (duration.count()\ <\ 10)}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}The\ directions\ of\ vertices\ are\ calculated:\ "{}}\ <<\ GREEN\_TEXT\ <<\ duration.count()\ <<\ RESET\_COLOR\ <<\ \textcolor{stringliteral}{"{}s"{}}\ <<\ std::endl;}
\DoxyCodeLine{00137\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}The\ directions\ of\ vertices\ are\ calculated:\ "{}}\ <<\ RED\_TEXT\ <<\ duration.count()\ <<\ RESET\_COLOR\ <<\ \textcolor{stringliteral}{"{}s"{}}\ <<\ std::endl;}
\DoxyCodeLine{00139\ }
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (this-\/>nng\ !=\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{00141\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ this-\/>edge\_num;\ i++)}
\DoxyCodeLine{00143\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ T2\ *e\ =\ \&this-\/>edges[i];}
\DoxyCodeLine{00145\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (e-\/>state\ ==\ State::Activate\ \&\&\ e-\/>shortest\_arc\_num\ ==\ 2)}
\DoxyCodeLine{00146\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00147\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>nng-\/>push(\&this-\/>edges[i]);}
\DoxyCodeLine{00148\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00149\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00151\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00153\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ std::runtime\_error(\textcolor{stringliteral}{"{}nng\ cannot\ be\ null!"{}});}
\DoxyCodeLine{00154\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00155\ \ \ \ \ \ \ \ \ start\_time\ =\ std::chrono::high\_resolution\_clock::now();}
\DoxyCodeLine{00156\ \ \ \ \ \ \ \ \ end\_time\ =\ std::chrono::high\_resolution\_clock::now();}
\DoxyCodeLine{00157\ \ \ \ \ \ \ \ \ duration\ =\ std::chrono::duration\_cast<std::chrono::seconds>(end\_time\ -\/\ start\_time);}
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ std::cout\ <<\ "{}NNG{\ucr}{\ucr}ʼ{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}ȶ{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}:\ "{}\ <<\ RED\_TEXT\ <<\ duration.count()\ <<\ RESET\_COLOR\ <<\ "{}{\ucr}{\ucr}"{}\ <<\ std::endl;}}
\DoxyCodeLine{00159\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ std::cout\ <<\ "{}nng\ size:\ "{}\ <<\ GREEN\_TEXT\ <<\ this-\/>nng-\/>size()\ <<\ RESET\_COLOR\ <<std::endl;}}
\DoxyCodeLine{00160\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (duration.count()\ <\ 10)}
\DoxyCodeLine{00161\ \ \ \ \ \ \ \ \ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}The\ priority\ queue\ in\ NNG\ is\ initialized:\ "{}}\ <<\ GREEN\_TEXT\ <<\ duration.count()\ <<\ RESET\_COLOR\ <<\ \textcolor{stringliteral}{"{}s"{}}\ <<\ std::endl;}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00163\ \ \ \ \ \ \ \ \ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}The\ priority\ queue\ in\ NNG\ is\ initialized:\ "{}}\ <<\ RED\_TEXT\ <<\ duration.count()\ <<\ RESET\_COLOR\ <<\ \textcolor{stringliteral}{"{}s"{}}\ <<\ std::endl;}
\DoxyCodeLine{00164\ \ \ \ \ \}}
\DoxyCodeLine{00165\ }
\DoxyCodeLine{00166\ \ \ \ \ \textcolor{keywordtype}{void}\ construct\_nng(\mbox{\hyperlink{class_n_n_g}{NNG}}\ *region\_nng)}
\DoxyCodeLine{00167\ \ \ \ \ \{}
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (this-\/>vertice\ ==\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{00169\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ std::runtime\_error(\textcolor{stringliteral}{"{}The\ function\ construct\_nng()\ must\ be\ called\ after\ the\ function\ connect\_vertex\_and\_edge()"{}});}
\DoxyCodeLine{00170\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ start\_time\ =\ std::chrono::high\_resolution\_clock::now();}
\DoxyCodeLine{00171\ }
\DoxyCodeLine{00172\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (region\_nng\ !=\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ \ \ \ \ region\_nng-\/>clear();}
\DoxyCodeLine{00174\ }
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ this-\/>edge\_num;\ i++)}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ \ \ \ \ T2\ *e\ =\ \&this-\/>edges[i];}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (e-\/>state\ !=\ State::Freeze)}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ e-\/>shortest\_arc\_num\ =\ 0;}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00183\ }
\DoxyCodeLine{00184\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ this-\/>vertice\_num;\ i++)}
\DoxyCodeLine{00185\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00186\ \ \ \ \ \ \ \ \ \ \ \ \ T1\ *v\ =\ \&this-\/>vertice[i];}
\DoxyCodeLine{00187\ \ \ \ \ \ \ \ \ \ \ \ \ v-\/>direct\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00188\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (v-\/>state\ !=\ State::Freeze)}
\DoxyCodeLine{00189\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00190\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>initial\_direct(v,\ this-\/>edges);}
\DoxyCodeLine{00191\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00192\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00193\ }
\DoxyCodeLine{00194\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ end\_time\ =\ std::chrono::high\_resolution\_clock::now();}
\DoxyCodeLine{00195\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ duration\ =\ std::chrono::duration\_cast<std::chrono::seconds>(end\_time\ -\/\ start\_time);}
\DoxyCodeLine{00196\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ std::cout\ <<\ "{}vertices{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}:\ "{}\ <<\ RED\_TEXT\ <<\ duration.count()\ <<\ RESET\_COLOR\ <<\ "{}{\ucr}{\ucr}"{}\ <<\ std::endl;}}
\DoxyCodeLine{00197\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ if\ (duration.count()\ <\ 10)\ std::cout\ <<\ "{}The\ directions\ of\ vertices\ are\ calculated:\ "{}\ <<\ GREEN\_TEXT\ <<\ duration.count()\ <<\ RESET\_COLOR\ <<\ "{}s"{}\ <<\ std::endl;}}
\DoxyCodeLine{00198\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ else\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::cout\ <<\ "{}The\ directions\ of\ vertices\ are\ calculated:\ "{}\ <<\ RED\_TEXT\ <<\ duration.count()\ <<\ RESET\_COLOR\ <<\ "{}s"{}\ <<\ std::endl;}}
\DoxyCodeLine{00199\ }
\DoxyCodeLine{00200\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (region\_nng\ !=\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{00201\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00202\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ this-\/>edge\_num;\ i++)}
\DoxyCodeLine{00203\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00204\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ T2\ *e\ =\ \&this-\/>edges[i];}
\DoxyCodeLine{00205\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (e-\/>state\ ==\ State::Activate\ \&\&\ e-\/>shortest\_arc\_num\ ==\ 2)}
\DoxyCodeLine{00206\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00207\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ region\_nng-\/>push(\&this-\/>edges[i]);}
\DoxyCodeLine{00208\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00209\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00210\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00211\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00212\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00213\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ std::runtime\_error(\textcolor{stringliteral}{"{}nng\ cannot\ be\ null!"{}});}
\DoxyCodeLine{00214\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00215\ }
\DoxyCodeLine{00216\ \ \ \ \ \ \ \ \ start\_time\ =\ std::chrono::high\_resolution\_clock::now();}
\DoxyCodeLine{00217\ \ \ \ \ \ \ \ \ end\_time\ =\ std::chrono::high\_resolution\_clock::now();}
\DoxyCodeLine{00218\ \ \ \ \ \ \ \ \ duration\ =\ std::chrono::duration\_cast<std::chrono::seconds>(end\_time\ -\/\ start\_time);}
\DoxyCodeLine{00219\ \ \ \ \ \}}
\DoxyCodeLine{00220\ }
\DoxyCodeLine{00221\ \ \ \ \ \textcolor{keywordtype}{void}\ initial\_direct(T1\ *v,\ T2\ *edge\_array)}
\DoxyCodeLine{00222\ \ \ \ \ \{}
\DoxyCodeLine{00223\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ min\_w\ =\ std::numeric\_limits<double>::max();}
\DoxyCodeLine{00224\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ v-\/>edges.size();\ i++)}
\DoxyCodeLine{00225\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00226\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \textcolor{keywordtype}{id}\ =\ v-\/>edges[i];}
\DoxyCodeLine{00227\ \ \ \ \ \ \ \ \ \ \ \ \ T2\ *ptr\_e\ =\ \&edge\_array[id];}
\DoxyCodeLine{00228\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ptr\_e-\/>weight\ <\ min\_w)}
\DoxyCodeLine{00229\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00230\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ v-\/>direct\ =\ ptr\_e;}
\DoxyCodeLine{00231\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ min\_w\ =\ ptr\_e-\/>weight;}
\DoxyCodeLine{00232\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00233\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00234\ }
\DoxyCodeLine{00235\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (v-\/>direct\ !=\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{00236\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00237\ \ \ \ \ \ \ \ \ \ \ \ \ v-\/>direct-\/>shortest\_arc\_num++;}
\DoxyCodeLine{00238\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00239\ \ \ \ \ \}}
\DoxyCodeLine{00240\ }
\DoxyCodeLine{00241\ \ \ \ \ std::pair<T2\ *,\ T1\ *>\ is\_edge\_connected\_vertex(T2\ *test\_e,\ T1\ *aim\_v)}
\DoxyCodeLine{00242\ \ \ \ \ \{}
\DoxyCodeLine{00243\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0;\ i\ <\ aim\_v-\/>edges.size();\ ++i)}
\DoxyCodeLine{00244\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00245\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \textcolor{keywordtype}{id}\ =\ aim\_v-\/>edges[i];}
\DoxyCodeLine{00246\ \ \ \ \ \ \ \ \ \ \ \ \ T2\ *e\_has\_in\_aim\_v\ =\ \&this-\/>edges[id];}
\DoxyCodeLine{00247\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (e\_has\_in\_aim\_v-\/>compareByEnds(*test\_e))}
\DoxyCodeLine{00248\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00249\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ std::make\_pair(e\_has\_in\_aim\_v,\ (T1\ *)e\_has\_in\_aim\_v-\/>get\_other\_vertex(aim\_v));}
\DoxyCodeLine{00250\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00251\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00252\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ std::make\_pair(\textcolor{keyword}{nullptr},\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00253\ \ \ \ \ \}}
\DoxyCodeLine{00254\ }
\DoxyCodeLine{00255\ \ \ \ \ \textcolor{keywordtype}{void}\ update\_direction\_cycle\_in\_2nd\_degree\_vertices(T1\ *v,\ \mbox{\hyperlink{class_n_n_g}{NNG}}\ *nng\_ptr)}
\DoxyCodeLine{00256\ \ \ \ \ \{}
\DoxyCodeLine{00257\ }
\DoxyCodeLine{00258\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Edge*\ min\_edge\ =\ v-\/>get\_min\_w\_edge(this-\/>edges);}}
\DoxyCodeLine{00259\ \ \ \ \ \ \ \ \ T2\ *min\_edge\ =\ this-\/>get\_min\_w\_edge((T1\ *)v,\ this-\/>edges);}
\DoxyCodeLine{00260\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (v-\/>direct\ !=\ min\_edge)}
\DoxyCodeLine{00261\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00262\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ if\ (v-\/>direct-\/>shortest\_arc\_num\ ==\ 2)\ this-\/>nng-\/>remove(v-\/>direct);}}
\DoxyCodeLine{00263\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ v-\/>change\_direct(min\_edge,\ this-\/>nng);}}
\DoxyCodeLine{00264\ \ \ \ \ \ \ \ \ \ \ \ \ v-\/>change\_direct(min\_edge,\ nng\_ptr);}
\DoxyCodeLine{00265\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ if\ (v-\/>direct-\/>shortest\_arc\_num\ ==\ 2)\ this-\/>nng-\/>push(v-\/>direct);}}
\DoxyCodeLine{00266\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00267\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ {\ucr}{\ucr}{\ucr}û{\ucr}䷽{\ucr}{\ucr}ԭʼ{\ucr}{\ucr}RAG{\ucr}е{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}cycle{\ucr}{\ucr}{\ucr}{\ucr}nng{\ucr}У{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}do\ nothing}}
\DoxyCodeLine{00268\ \ \ \ \ \}}
\DoxyCodeLine{00269\ }
\DoxyCodeLine{00270\ \ \ \ \ T2\ *get\_min\_w\_edge(T1\ *v,\ T2\ *edge\_array)}
\DoxyCodeLine{00271\ \ \ \ \ \{}
\DoxyCodeLine{00272\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ min\_w\ =\ std::numeric\_limits<double>::max();}
\DoxyCodeLine{00273\ \ \ \ \ \ \ \ \ T2\ *ptr\_e\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00274\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ v-\/>edges.size();\ i++)}
\DoxyCodeLine{00275\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00276\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \textcolor{keywordtype}{id}\ =\ v-\/>edges[i];}
\DoxyCodeLine{00277\ \ \ \ \ \ \ \ \ \ \ \ \ T2\ *ptr\_e\_it\ =\ \&edge\_array[id];}
\DoxyCodeLine{00278\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ptr\_e\_it-\/>weight\ <\ min\_w)}
\DoxyCodeLine{00279\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00280\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ptr\_e\ =\ ptr\_e\_it;}
\DoxyCodeLine{00281\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ min\_w\ =\ ptr\_e\_it-\/>weight;}
\DoxyCodeLine{00282\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00283\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00284\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ ptr\_e;}
\DoxyCodeLine{00285\ \ \ \ \ \}}
\DoxyCodeLine{00286\ }
\DoxyCodeLine{00287\ \ \ \ \ \textcolor{keywordtype}{void}\ merge\_vertices(\mbox{\hyperlink{class_edge}{Edge}}\ *minmum\_arc)}
\DoxyCodeLine{00288\ \ \ \ \ \{}
\DoxyCodeLine{00289\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_vertex}{Vertex}}\ *seed\_v\ =\ minmum\_arc-\/>left\_vertex;}
\DoxyCodeLine{00290\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_vertex}{Vertex}}\ *grow\_v\ =\ minmum\_arc-\/>right\_vertex;}
\DoxyCodeLine{00291\ }
\DoxyCodeLine{00292\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ step(2)\ update\ features}}
\DoxyCodeLine{00293\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ seed\_v-\/>mean\ =\ (seed\_v-\/>area\ *\ seed\_v-\/>mean\ +\ grow\_v-\/>area\ *\ grow\_v-\/>mean)\ /\ (seed\_v-\/>area\ +\ grow\_v-\/>area);}}
\DoxyCodeLine{00294\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ seed\_v-\/>area\ =\ seed\_v-\/>area\ +\ grow\_v-\/>area;}}
\DoxyCodeLine{00295\ \ \ \ \ \ \ \ \ this-\/>update\_features\_func((T\_Feature\ *)seed\_v-\/>ptr\_features,\ (T\_Feature\ *)grow\_v-\/>ptr\_features,\ (T2\ *)minmum\_arc);}
\DoxyCodeLine{00296\ }
\DoxyCodeLine{00297\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ grow\_v-\/>node\_type\ =\ -\/1;}}
\DoxyCodeLine{00298\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ grow\_v-\/>state\ =\ State::Freeze;}}
\DoxyCodeLine{00299\ }
\DoxyCodeLine{00300\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ step(1)\ merge\ vi\ and\ vj}}
\DoxyCodeLine{00301\ \ \ \ \ \ \ \ \ seed\_v-\/>add\_next\_vertex(grow\_v);}
\DoxyCodeLine{00302\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ seed\_v-\/>is\_changed\ =\ true;}}
\DoxyCodeLine{00303\ }
\DoxyCodeLine{00304\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ step(3)\ remove\ eij\ both\ in\ Li\ and\ Lj}}
\DoxyCodeLine{00305\ \ \ \ \ \ \ \ \ seed\_v-\/>remove\_edge(minmum\_arc-\/>ID);}
\DoxyCodeLine{00306\ \ \ \ \ \ \ \ \ seed\_v-\/>state\ =\ State::Suspend;\ \textcolor{comment}{//\ a\ singnal\ for\ change\ of\ seed\ vertex}}
\DoxyCodeLine{00307\ \ \ \ \ \ \ \ \ grow\_v-\/>remove\_edge(minmum\_arc-\/>ID);}
\DoxyCodeLine{00308\ \ \ \ \ \ \ \ \ grow\_v-\/>state\ =\ State::Freeze;}
\DoxyCodeLine{00309\ \ \ \ \ \ \ \ \ minmum\_arc-\/>state\ =\ State::Freeze;}
\DoxyCodeLine{00310\ }
\DoxyCodeLine{00311\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ step(4)\ replace\ grow\_v\ vj\ to\ vi\ in\ the\ arcs\ pointed\ by\ Lj}}
\DoxyCodeLine{00312\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0;\ i\ <\ grow\_v-\/>edges.size();\ ++i)}
\DoxyCodeLine{00313\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00314\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ ʹ{\ucr}{\ucr}myVector[i]ִ{\ucr}в{\ucr}{\ucr}{\ucr}}}
\DoxyCodeLine{00315\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \textcolor{keywordtype}{id}\ =\ grow\_v-\/>edges[i];}
\DoxyCodeLine{00316\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_edge}{Edge}}\ *e\_in\_grow\_v\ =\ \&this-\/>edges[id];}
\DoxyCodeLine{00317\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (e\_in\_grow\_v-\/>left\_vertex\ ==\ grow\_v)}
\DoxyCodeLine{00318\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00319\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ e\_in\_grow\_v-\/>left\_vertex\ =\ seed\_v;}
\DoxyCodeLine{00320\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00321\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (e\_in\_grow\_v-\/>right\_vertex\ ==\ grow\_v)}
\DoxyCodeLine{00322\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00323\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ e\_in\_grow\_v-\/>right\_vertex\ =\ seed\_v;}
\DoxyCodeLine{00324\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00325\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00326\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00327\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}Error\ edge\ id:\ "{}}\ <<\ e\_in\_grow\_v-\/>ID\ <<\ std::endl;}
\DoxyCodeLine{00328\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ std::runtime\_error(\textcolor{stringliteral}{"{}Topological\ relationship\ error!"{}});}
\DoxyCodeLine{00329\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00330\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00331\ }
\DoxyCodeLine{00332\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ step(5)\ append\ Lj\ to\ Li,\ and\ remove\ the\ redundant\ arcs\ connecting\ the\ same\ adjacent\ nodes\ in\ Li\ and\ update\ length\ of\ edges}}
\DoxyCodeLine{00333\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0;\ i\ <\ grow\_v-\/>edges.size();\ ++i)}
\DoxyCodeLine{00334\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00335\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \textcolor{keywordtype}{id}\ =\ grow\_v-\/>edges[i];}
\DoxyCodeLine{00336\ \ \ \ \ \ \ \ \ \ \ \ \ T2\ *e\_in\_grow\_v\ =\ \&this-\/>edges[id];}
\DoxyCodeLine{00337\ \ \ \ \ \ \ \ \ \ \ \ \ std::pair<T2\ *,\ T1\ *>\ e\_v\ =\ this-\/>is\_edge\_connected\_vertex(e\_in\_grow\_v,\ (T1\ *)seed\_v);}
\DoxyCodeLine{00338\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (e\_v.first\ !=\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{00339\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00340\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_edge}{Edge}}\ *has\_connected\_edge\ =\ e\_v.first;}
\DoxyCodeLine{00341\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ has\_connected\_edge-\/>length\ +=\ e\_in\_grow\_v-\/>length;\ \textcolor{comment}{//\ update\ the\ length\ of\ the\ edge}}
\DoxyCodeLine{00342\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ has\_connected\_edge-\/>weight\ =\ has\_connected\_edge-\/>weight\ <=\ e\_in\_grow\_v-\/>weight\ ?\ has\_connected\_edge-\/>weight\ :\ e\_in\_grow\_v-\/>weight;}
\DoxyCodeLine{00343\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_vertex}{Vertex}}\ *neighbor\_vertex\ =\ e\_v.second;}
\DoxyCodeLine{00344\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ neighbor\_vertex-\/>remove\_edge(e\_in\_grow\_v-\/>ID);}
\DoxyCodeLine{00345\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ e\_in\_grow\_v-\/>type\ =\ -\/1;}}
\DoxyCodeLine{00346\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ e\_in\_grow\_v-\/>state\ =\ State::Freeze;}
\DoxyCodeLine{00347\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (neighbor\_vertex-\/>direct\ ==\ e\_in\_grow\_v)\ \textcolor{comment}{//\ {\ucr}ڽӽڵ{\ucr}ָ{\ucr}򱻺ϲ{\ucr}{\ucr}Ľڵ{\ucr}ʱ{\ucr}{\ucr}{\ucr}{\ucr}Ϊgrow{\ucr}{\ucr}seed{\ucr}γ{\ucr}cycle{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}e\_in\_grow\_v{\ucr}ض{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}cycle}}
\DoxyCodeLine{00348\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00349\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ neighbor\_vertex-\/>change\_direct(e\_v.first,\ this-\/>nng);\ \textcolor{comment}{//\ {\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}ָ{\ucr}򱻺ϲ{\ucr}{\ucr}ڵ{\ucr}{\ucr}Ϊָ{\ucr}{\ucr}{\ucr}½ڵ㣬{\ucr}{\ucr}Ϊ{\ucr}½ڵ㻹δ{\ucr}{\ucr}{\ucr}跽{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}Դ˴{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}һ{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}cycle}}
\DoxyCodeLine{00350\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00351\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00352\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00353\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00354\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ seed\_v-\/>push(e\_in\_grow\_v);}
\DoxyCodeLine{00355\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00356\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00357\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ delete\ grow\_v-\/>edges}}
\DoxyCodeLine{00358\ \ \ \ \ \ \ \ \ grow\_v-\/>edges.clear();}
\DoxyCodeLine{00359\ \ \ \ \ \ \ \ \ std::vector<int>().swap(grow\_v-\/>edges);\ \textcolor{comment}{//\ free\ memory\ in\ \ grow\_v-\/>edges}}
\DoxyCodeLine{00360\ }
\DoxyCodeLine{00361\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ step(6)\ update\ the\ weights\ of\ arcs\ connected\ to\ the\ merged\ node}}
\DoxyCodeLine{00362\ }
\DoxyCodeLine{00363\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0;\ i\ <\ seed\_v-\/>edges.size();\ ++i)}
\DoxyCodeLine{00364\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00365\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \textcolor{keywordtype}{id}\ =\ seed\_v-\/>edges[i];}
\DoxyCodeLine{00366\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_edge}{Edge}}\ *e\_in\_seed\_v\ =\ \&this-\/>edges[id];}
\DoxyCodeLine{00367\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_vertex}{Vertex}}\ *left\ =\ e\_in\_seed\_v-\/>left\_vertex;}
\DoxyCodeLine{00368\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_vertex}{Vertex}}\ *right\ =\ e\_in\_seed\_v-\/>right\_vertex;}
\DoxyCodeLine{00369\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ double\ weight\ =\ left-\/>area\ *\ right-\/>area\ /\ (left-\/>area\ +\ right-\/>area)\ *\ pow(left-\/>mean\ -\/\ right-\/>mean,\ 2.0);}}
\DoxyCodeLine{00370\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ weight\ =\ this-\/>merging\_criteria((T\_Feature\ *)left-\/>ptr\_features,\ (T\_Feature\ *)right-\/>ptr\_features,\ (T2\ *)e\_in\_seed\_v);}
\DoxyCodeLine{00371\ \ \ \ \ \ \ \ \ \ \ \ \ e\_in\_seed\_v-\/>weight\ =\ weight;}
\DoxyCodeLine{00372\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00373\ }
\DoxyCodeLine{00374\ \ \ \ \ \ \ \ \ this-\/>initial\_direct((T1\ *)seed\_v,\ this-\/>edges);\ \textcolor{comment}{//\ {\ucr}{\ucr}{\ucr}Ľڵ{\ucr}{\ucr}ʼ{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}ܲ{\ucr}{\ucr}{\ucr}{\ucr}µ{\ucr}cycle{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}Ҫ{\ucr}{\ucr}{\ucr}ж{\ucr}{\ucr}Ƿ{\ucr}{\ucr}{\ucr}{\ucr}nng}}
\DoxyCodeLine{00375\ }
\DoxyCodeLine{00376\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (seed\_v-\/>direct-\/>shortest\_arc\_num\ ==\ 2)}
\DoxyCodeLine{00377\ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>nng-\/>push(seed\_v-\/>direct);}
\DoxyCodeLine{00378\ }
\DoxyCodeLine{00379\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ step(7)update\ the\ shortest\ arc\ and\ cycles\ of\ adjacent\ nodes{\ucr}{\ucr}{\ucr}{\ucr}ʱ{\ucr}{\ucr}RAG{\ucr}{\ucr}edge{\ucr}γɵ{\ucr}{\ucr}{\ucr}{\ucr}е{\ucr}cycle{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}nng{\ucr}У{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}ֻ{\ucr}ø{\ucr}{\ucr}{\ucr}{\ucr}ڽӽڵ{\ucr}ķ{\ucr}{\ucr}{\ucr}}}
\DoxyCodeLine{00380\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0;\ i\ <\ seed\_v-\/>edges.size();\ ++i)}
\DoxyCodeLine{00381\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00382\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \textcolor{keywordtype}{id}\ =\ seed\_v-\/>edges[i];}
\DoxyCodeLine{00383\ \ \ \ \ \ \ \ \ \ \ \ \ T2\ *e\_in\_seed\_v\ =\ \&this-\/>edges[id];}
\DoxyCodeLine{00384\ \ \ \ \ \ \ \ \ \ \ \ \ T1\ *neighbouring\_v\ =\ (T1\ *)e\_in\_seed\_v-\/>get\_other\_vertex(seed\_v);\ \textcolor{comment}{//\ {\ucr}ڽӽڵ{\ucr}}}
\DoxyCodeLine{00385\ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>update\_direction\_cycle\_in\_2nd\_degree\_vertices(neighbouring\_v,\ this-\/>nng);}
\DoxyCodeLine{00386\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00387\ \ \ \ \ \}}
\DoxyCodeLine{00388\ }
\DoxyCodeLine{00389\ \ \ \ \ \textcolor{keywordtype}{void}\ merge\_vertices(\mbox{\hyperlink{class_edge}{Edge}}\ *minmum\_arc,\ \mbox{\hyperlink{class_n_n_g}{NNG}}\ *region\_nng)}
\DoxyCodeLine{00390\ \ \ \ \ \{}
\DoxyCodeLine{00391\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_vertex}{Vertex}}\ *seed\_v\ =\ minmum\_arc-\/>left\_vertex;}
\DoxyCodeLine{00392\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_vertex}{Vertex}}\ *grow\_v\ =\ minmum\_arc-\/>right\_vertex;}
\DoxyCodeLine{00393\ }
\DoxyCodeLine{00394\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (seed\_v\ ==\ grow\_v)}
\DoxyCodeLine{00395\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00396\ \ \ \ \ \ \ \ \ \ \ \ \ std::cout\ <<\ minmum\_arc-\/>ID\ <<\ std::endl;}
\DoxyCodeLine{00397\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ std::runtime\_error(\textcolor{stringliteral}{"{}Error:\ try\ to\ merge\ the\ same\ vertex!"{}});}
\DoxyCodeLine{00398\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00399\ }
\DoxyCodeLine{00400\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ update\ centroid\ positions\ of\ seed\_v}}
\DoxyCodeLine{00401\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ seed\_v-\/>position\_dimension;\ i++)}
\DoxyCodeLine{00402\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00403\ \ \ \ \ \ \ \ \ \ \ \ \ seed\_v-\/>positions[i]\ =\ (seed\_v-\/>positions[i]\ *\ seed\_v-\/>size\ +\ grow\_v-\/>positions[i]\ *\ grow\_v-\/>size)\ /\ (seed\_v-\/>size\ +\ grow\_v-\/>size);}
\DoxyCodeLine{00404\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00405\ }
\DoxyCodeLine{00406\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ step(2)\ update\ features}}
\DoxyCodeLine{00407\ \ \ \ \ \ \ \ \ this-\/>update\_features\_func((T\_Feature\ *)seed\_v-\/>ptr\_features,\ (T\_Feature\ *)grow\_v-\/>ptr\_features,\ (T2\ *)minmum\_arc);}
\DoxyCodeLine{00408\ }
\DoxyCodeLine{00409\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ step(1)\ merge\ vi\ and\ vj}}
\DoxyCodeLine{00410\ \ \ \ \ \ \ \ \ seed\_v-\/>add\_next\_vertex(grow\_v);}
\DoxyCodeLine{00411\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ seed\_v-\/>is\_changed\ =\ true;}}
\DoxyCodeLine{00412\ }
\DoxyCodeLine{00413\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ step(3)\ remove\ eij\ both\ in\ Li\ and\ Lj}}
\DoxyCodeLine{00414\ \ \ \ \ \ \ \ \ seed\_v-\/>remove\_edge(minmum\_arc-\/>ID);}
\DoxyCodeLine{00415\ \ \ \ \ \ \ \ \ seed\_v-\/>state\ =\ State::Suspend;\ \textcolor{comment}{//\ a\ singnal\ for\ the\ change\ of\ seed\ vertex}}
\DoxyCodeLine{00416\ \ \ \ \ \ \ \ \ grow\_v-\/>remove\_edge(minmum\_arc-\/>ID);}
\DoxyCodeLine{00417\ \ \ \ \ \ \ \ \ grow\_v-\/>state\ =\ State::Freeze;}
\DoxyCodeLine{00418\ \ \ \ \ \ \ \ \ minmum\_arc-\/>state\ =\ State::Freeze;}
\DoxyCodeLine{00419\ }
\DoxyCodeLine{00420\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ step(4)\ replace\ grow\_v\ vj\ to\ vi\ in\ the\ arcs\ pointed\ by\ Lj}}
\DoxyCodeLine{00421\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0;\ i\ <\ grow\_v-\/>edges.size();\ ++i)}
\DoxyCodeLine{00422\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00423\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ ʹ{\ucr}{\ucr}myVector[i]ִ{\ucr}в{\ucr}{\ucr}{\ucr}}}
\DoxyCodeLine{00424\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ {\ucr}{\ucr}{\ucr}磬{\ucr}{\ucr}ӡԪ{\ucr}{\ucr}ֵ}}
\DoxyCodeLine{00425\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \textcolor{keywordtype}{id}\ =\ grow\_v-\/>edges[i];}
\DoxyCodeLine{00426\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_edge}{Edge}}\ *e\_in\_grow\_v\ =\ \&this-\/>edges[id];}
\DoxyCodeLine{00427\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (e\_in\_grow\_v-\/>left\_vertex\ ==\ grow\_v)}
\DoxyCodeLine{00428\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00429\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ e\_in\_grow\_v-\/>left\_vertex\ =\ seed\_v;}
\DoxyCodeLine{00430\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00431\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (e\_in\_grow\_v-\/>right\_vertex\ ==\ grow\_v)}
\DoxyCodeLine{00432\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00433\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ e\_in\_grow\_v-\/>right\_vertex\ =\ seed\_v;}
\DoxyCodeLine{00434\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00435\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00436\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00437\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::cout\ <<\ e\_in\_grow\_v-\/>left\_vertex-\/>ID\ <<\ \textcolor{stringliteral}{"{}\ "{}}\ <<\ e\_in\_grow\_v-\/>right\_vertex-\/>ID\ <<\ std::endl;}
\DoxyCodeLine{00438\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::cout\ <<\ seed\_v-\/>ID\ <<\ \textcolor{stringliteral}{"{}\ "{}}\ <<\ grow\_v-\/>ID\ <<\ std::endl;}
\DoxyCodeLine{00439\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}mini\ edge:\ "{}}\ <<\ minmum\_arc-\/>ID;}
\DoxyCodeLine{00440\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}error\ edge:\ "{}}\ <<\ e\_in\_grow\_v-\/>ID;}
\DoxyCodeLine{00441\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ std::runtime\_error(\textcolor{stringliteral}{"{}Topological\ relationship\ error!"{}});}
\DoxyCodeLine{00442\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00443\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00444\ }
\DoxyCodeLine{00445\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ step(5)\ append\ Lj\ to\ Li,\ and\ remove\ the\ redundant\ arcs\ connecting\ the\ same\ adjacent\ nodes\ in\ Li\ and\ update\ length\ of\ edges}}
\DoxyCodeLine{00446\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0;\ i\ <\ grow\_v-\/>edges.size();\ ++i)}
\DoxyCodeLine{00447\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00448\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \textcolor{keywordtype}{id}\ =\ grow\_v-\/>edges[i];}
\DoxyCodeLine{00449\ \ \ \ \ \ \ \ \ \ \ \ \ T2\ *e\_in\_grow\_v\ =\ \&this-\/>edges[id];}
\DoxyCodeLine{00450\ \ \ \ \ \ \ \ \ \ \ \ \ std::pair<T2\ *,\ T1\ *>\ e\_v\ =\ this-\/>is\_edge\_connected\_vertex(e\_in\_grow\_v,\ (T1\ *)seed\_v);}
\DoxyCodeLine{00451\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (e\_v.first\ !=\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{00452\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00453\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_edge}{Edge}}\ *has\_connected\_edge\ =\ e\_v.first;}
\DoxyCodeLine{00454\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ has\_connected\_edge-\/>length\ +=\ e\_in\_grow\_v-\/>length;\ \textcolor{comment}{//\ update\ the\ length\ of\ the\ edge}}
\DoxyCodeLine{00455\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ has\_connected\_edge-\/>weight\ =\ has\_connected\_edge-\/>weight\ <=\ e\_in\_grow\_v-\/>weight\ ?\ has\_connected\_edge-\/>weight\ :\ e\_in\_grow\_v-\/>weight;}
\DoxyCodeLine{00456\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_vertex}{Vertex}}\ *neighbor\_vertex\ =\ e\_v.second;}
\DoxyCodeLine{00457\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ neighbor\_vertex-\/>remove\_edge(e\_in\_grow\_v-\/>ID);}
\DoxyCodeLine{00458\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ e\_in\_grow\_v-\/>type\ =\ -\/1;}}
\DoxyCodeLine{00459\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ e\_in\_grow\_v-\/>state\ =\ State::Freeze;}
\DoxyCodeLine{00460\ }
\DoxyCodeLine{00461\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (neighbor\_vertex-\/>direct\ ==\ e\_in\_grow\_v)\ \textcolor{comment}{//\ {\ucr}ڽӽڵ{\ucr}ָ{\ucr}򱻺ϲ{\ucr}{\ucr}Ľڵ{\ucr}ʱ{\ucr}{\ucr}{\ucr}{\ucr}Ϊgrow{\ucr}{\ucr}seed{\ucr}γ{\ucr}cycle{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}e\_in\_grow\_v{\ucr}ض{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}cycle}}
\DoxyCodeLine{00462\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00463\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ neighbor\_vertex-\/>change\_direct(e\_v.first,\ region\_nng);\ \textcolor{comment}{//\ {\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}ָ{\ucr}򱻺ϲ{\ucr}{\ucr}ڵ{\ucr}{\ucr}Ϊָ{\ucr}{\ucr}{\ucr}½ڵ㣬{\ucr}{\ucr}Ϊ{\ucr}½ڵ㻹δ{\ucr}{\ucr}{\ucr}跽{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}Դ˴{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}һ{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}cycle}}
\DoxyCodeLine{00464\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00465\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00466\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00467\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00468\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ seed\_v-\/>push(e\_in\_grow\_v);}
\DoxyCodeLine{00469\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00470\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00471\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ delete\ grow\_v-\/>edges}}
\DoxyCodeLine{00472\ \ \ \ \ \ \ \ \ grow\_v-\/>edges.clear();}
\DoxyCodeLine{00473\ \ \ \ \ \ \ \ \ std::vector<int>().swap(grow\_v-\/>edges);\ \textcolor{comment}{//\ free\ memory\ in\ \ grow\_v-\/>edges}}
\DoxyCodeLine{00474\ }
\DoxyCodeLine{00475\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ step(6)\ update\ the\ weights\ of\ arcs\ connected\ to\ the\ merged\ node}}
\DoxyCodeLine{00476\ }
\DoxyCodeLine{00477\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0;\ i\ <\ seed\_v-\/>edges.size();\ ++i)}
\DoxyCodeLine{00478\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00479\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \textcolor{keywordtype}{id}\ =\ seed\_v-\/>edges[i];}
\DoxyCodeLine{00480\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_edge}{Edge}}\ *e\_in\_seed\_v\ =\ \&this-\/>edges[id];}
\DoxyCodeLine{00481\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_vertex}{Vertex}}\ *left\ =\ e\_in\_seed\_v-\/>left\_vertex;}
\DoxyCodeLine{00482\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_vertex}{Vertex}}\ *right\ =\ e\_in\_seed\_v-\/>right\_vertex;}
\DoxyCodeLine{00483\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ double\ weight\ =\ left-\/>area\ *\ right-\/>area\ /\ (left-\/>area\ +\ right-\/>area)\ *\ pow(left-\/>mean\ -\/\ right-\/>mean,\ 2.0);}}
\DoxyCodeLine{00484\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ weight\ =\ this-\/>merging\_criteria((T\_Feature\ *)left-\/>ptr\_features,\ (T\_Feature\ *)right-\/>ptr\_features,\ (T2\ *)e\_in\_seed\_v);}
\DoxyCodeLine{00485\ \ \ \ \ \ \ \ \ \ \ \ \ e\_in\_seed\_v-\/>weight\ =\ weight;}
\DoxyCodeLine{00486\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00487\ }
\DoxyCodeLine{00488\ \ \ \ \ \ \ \ \ this-\/>initial\_direct((T1\ *)seed\_v,\ this-\/>edges);\ \textcolor{comment}{//\ {\ucr}{\ucr}{\ucr}Ľڵ{\ucr}{\ucr}ʼ{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}ܲ{\ucr}{\ucr}{\ucr}{\ucr}µ{\ucr}cycle{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}Ҫ{\ucr}{\ucr}{\ucr}ж{\ucr}{\ucr}Ƿ{\ucr}{\ucr}{\ucr}{\ucr}nng}}
\DoxyCodeLine{00489\ }
\DoxyCodeLine{00490\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (seed\_v-\/>direct-\/>shortest\_arc\_num\ ==\ 2)}
\DoxyCodeLine{00491\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00492\ \ \ \ \ \ \ \ \ \ \ \ \ region\_nng-\/>push(seed\_v-\/>direct);}
\DoxyCodeLine{00493\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00494\ }
\DoxyCodeLine{00495\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ step(7)update\ the\ shortest\ arc\ and\ cycles\ of\ adjacent\ nodes{\ucr}{\ucr}{\ucr}{\ucr}ʱ{\ucr}{\ucr}RAG{\ucr}{\ucr}edge{\ucr}γɵ{\ucr}{\ucr}{\ucr}{\ucr}е{\ucr}cycle{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}nng{\ucr}У{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}ֻ{\ucr}ø{\ucr}{\ucr}{\ucr}{\ucr}ڽӽڵ{\ucr}ķ{\ucr}{\ucr}{\ucr}}}
\DoxyCodeLine{00496\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0;\ i\ <\ seed\_v-\/>edges.size();\ ++i)}
\DoxyCodeLine{00497\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00498\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \textcolor{keywordtype}{id}\ =\ seed\_v-\/>edges[i];}
\DoxyCodeLine{00499\ \ \ \ \ \ \ \ \ \ \ \ \ T2\ *e\_in\_seed\_v\ =\ \&this-\/>edges[id];}
\DoxyCodeLine{00500\ \ \ \ \ \ \ \ \ \ \ \ \ T1\ *neighbouring\_v\ =\ (T1\ *)e\_in\_seed\_v-\/>get\_other\_vertex(seed\_v);\ \textcolor{comment}{//\ {\ucr}ڽӽڵ{\ucr}}}
\DoxyCodeLine{00501\ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>update\_direction\_cycle\_in\_2nd\_degree\_vertices(neighbouring\_v,\ region\_nng);}
\DoxyCodeLine{00502\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00503\ \ \ \ \ \}}
\DoxyCodeLine{00504\ }
\DoxyCodeLine{00505\ \ \ \ \ \textcolor{keywordtype}{void}\ simply\_merge\_vertices(\mbox{\hyperlink{class_edge}{Edge}}\ *minmum\_arc)}
\DoxyCodeLine{00506\ \ \ \ \ \{}
\DoxyCodeLine{00507\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_vertex}{Vertex}}\ *seed\_v\ =\ minmum\_arc-\/>left\_vertex;}
\DoxyCodeLine{00508\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_vertex}{Vertex}}\ *grow\_v\ =\ minmum\_arc-\/>right\_vertex;}
\DoxyCodeLine{00509\ }
\DoxyCodeLine{00510\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (seed\_v\ ==\ grow\_v)}
\DoxyCodeLine{00511\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00512\ \ \ \ \ \ \ \ \ \ \ \ \ std::cout\ <<\ minmum\_arc-\/>ID\ <<\ std::endl;}
\DoxyCodeLine{00513\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ std::runtime\_error(\textcolor{stringliteral}{"{}Error:\ try\ to\ merge\ the\ same\ vertex!"{}});}
\DoxyCodeLine{00514\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00515\ }
\DoxyCodeLine{00516\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ only\ merge\ two\ vertice,\ important,\ easy\ to\ be\ wrong}}
\DoxyCodeLine{00517\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ update\ centroid\ positions\ of\ seed\_v}}
\DoxyCodeLine{00518\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ seed\_v-\/>position\_dimension;\ i++)}
\DoxyCodeLine{00519\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00520\ \ \ \ \ \ \ \ \ \ \ \ \ seed\_v-\/>positions[i]\ =\ (seed\_v-\/>positions[i]\ *\ seed\_v-\/>size\ +\ grow\_v-\/>positions[i]\ *\ grow\_v-\/>size)\ /\ (seed\_v-\/>size\ +\ grow\_v-\/>size);}
\DoxyCodeLine{00521\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00522\ }
\DoxyCodeLine{00523\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ step(2)\ update\ features}}
\DoxyCodeLine{00524\ \ \ \ \ \ \ \ \ this-\/>update\_features\_func((T\_Feature\ *)seed\_v-\/>ptr\_features,\ (T\_Feature\ *)grow\_v-\/>ptr\_features,\ (T2\ *)minmum\_arc);}
\DoxyCodeLine{00525\ }
\DoxyCodeLine{00526\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ step(1)\ merge\ vi\ and\ vj}}
\DoxyCodeLine{00527\ \ \ \ \ \ \ \ \ seed\_v-\/>add\_next\_vertex(grow\_v);}
\DoxyCodeLine{00528\ }
\DoxyCodeLine{00529\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ step(3)\ remove\ eij\ both\ in\ Li\ and\ Lj}}
\DoxyCodeLine{00530\ \ \ \ \ \ \ \ \ seed\_v-\/>remove\_edge(minmum\_arc-\/>ID);\ \textcolor{comment}{//\ Test}}
\DoxyCodeLine{00531\ \ \ \ \ \ \ \ \ seed\_v-\/>state\ =\ State::Suspend;\ \ \ \ \ \ \textcolor{comment}{//\ a\ singnal\ for\ the\ change\ of\ seed\ vertex}}
\DoxyCodeLine{00532\ \ \ \ \ \ \ \ \ grow\_v-\/>remove\_edge(minmum\_arc-\/>ID);\ \textcolor{comment}{//\ Test}}
\DoxyCodeLine{00533\ \ \ \ \ \ \ \ \ grow\_v-\/>state\ =\ State::Freeze;}
\DoxyCodeLine{00534\ \ \ \ \ \ \ \ \ minmum\_arc-\/>state\ =\ State::Freeze;}
\DoxyCodeLine{00535\ }
\DoxyCodeLine{00536\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ step(4)\ change\ the\ edge\ state\ of\ seed\ and\ grow\ vertex}}
\DoxyCodeLine{00537\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0;\ i\ <\ seed\_v-\/>edges.size();\ ++i)\ \textcolor{comment}{//\ edge\ state\ of\ seed\ vertex}}
\DoxyCodeLine{00538\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00539\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \textcolor{keywordtype}{id}\ =\ seed\_v-\/>edges[i];}
\DoxyCodeLine{00540\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_edge}{Edge}}\ *e\ =\ \&this-\/>edges[id];}
\DoxyCodeLine{00541\ \ \ \ \ \ \ \ \ \ \ \ \ e-\/>state\ =\ State::Suspend;}
\DoxyCodeLine{00542\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00543\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0;\ i\ <\ grow\_v-\/>edges.size();\ ++i)\ \textcolor{comment}{//\ edge\ state\ of\ grow\ vertex}}
\DoxyCodeLine{00544\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00545\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \textcolor{keywordtype}{id}\ =\ grow\_v-\/>edges[i];}
\DoxyCodeLine{00546\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_edge}{Edge}}\ *e\ =\ \&this-\/>edges[id];}
\DoxyCodeLine{00547\ \ \ \ \ \ \ \ \ \ \ \ \ e-\/>state\ =\ State::Suspend;}
\DoxyCodeLine{00548\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00549\ \ \ \ \ \}}
\DoxyCodeLine{00550\ }
\DoxyCodeLine{00551\ \ \ \ \ T1\ *global\_best\_optimization(\textcolor{keywordtype}{double}\ threshold)}
\DoxyCodeLine{00552\ \ \ \ \ \{}
\DoxyCodeLine{00553\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ double\ las\_min\ =\ 0.0;}}
\DoxyCodeLine{00554\ \ \ \ \ \ \ \ \ this-\/>construct\_nng();}
\DoxyCodeLine{00555\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!this-\/>nng-\/>empty())}
\DoxyCodeLine{00556\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00557\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_edge}{Edge}}\ *minmum\_arc\ =\ this-\/>nng-\/>pop();}
\DoxyCodeLine{00558\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ las\_min\ =\ minmum\_arc-\/>weight;}}
\DoxyCodeLine{00559\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (minmum\_arc-\/>weight\ <\ threshold)}
\DoxyCodeLine{00560\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00561\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>merge\_vertices(minmum\_arc);}
\DoxyCodeLine{00562\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (this-\/>nng-\/>empty())}
\DoxyCodeLine{00563\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00564\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ minmum\_arc\ =\ this-\/>nng-\/>pop();}
\DoxyCodeLine{00565\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00566\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!this-\/>nng-\/>empty())}
\DoxyCodeLine{00567\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00568\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>nng-\/>push(minmum\_arc);}
\DoxyCodeLine{00569\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00570\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00571\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (this-\/>nng-\/>empty())}
\DoxyCodeLine{00572\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00573\ \ \ \ \ \ \ \ \ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}NNG\ empty!"{}}\ <<\ std::endl;}
\DoxyCodeLine{00574\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00575\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00576\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00577\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_edge}{Edge}}\ *minmum\_arc\ =\ this-\/>nng-\/>pop();}
\DoxyCodeLine{00578\ \ \ \ \ \ \ \ \ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}Last\ weight"{}}\ <<\ minmum\_arc-\/>weight\ <<\ std::endl;}
\DoxyCodeLine{00579\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00580\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ std::cout\ <<\ "{}Last\ edge\ weight:\ "{}\ <<\ las\_min\ <<\ std::endl;}}
\DoxyCodeLine{00581\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ activate\_v\ =\ 0;}
\DoxyCodeLine{00582\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ this-\/>vertice\_num;\ i++)}
\DoxyCodeLine{00583\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00584\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_vertex}{Vertex}}\ *v\ =\ (\mbox{\hyperlink{class_vertex}{Vertex}}\ *)\&this-\/>vertice[i];}
\DoxyCodeLine{00585\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (v-\/>state\ !=\ State::Freeze)}
\DoxyCodeLine{00586\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00587\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ activate\_v++;}
\DoxyCodeLine{00588\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00589\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00590\ \ \ \ \ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}Ouput\ vertex\ num:\ "{}}\ <<\ activate\_v\ <<\ std::endl;}
\DoxyCodeLine{00591\ \ \ \ \ \ \ \ \ std::pair<T1\ *,\ int>\ chains\ =\ this-\/>chaining\_vertice();}
\DoxyCodeLine{00592\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ chains.first;}
\DoxyCodeLine{00593\ \ \ \ \ \}}
\DoxyCodeLine{00594\ }
\DoxyCodeLine{00595\ \ \ \ \ \textcolor{keywordtype}{void}\ global\_best\_optimization(\mbox{\hyperlink{class_n_n_g}{NNG}}\ *ptr\_nng,\ \textcolor{keywordtype}{double}\ threshold)}
\DoxyCodeLine{00596\ \ \ \ \ \{}
\DoxyCodeLine{00597\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!ptr\_nng-\/>empty())}
\DoxyCodeLine{00598\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00599\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_edge}{Edge}}\ *minmum\_arc\ =\ ptr\_nng-\/>pop();}
\DoxyCodeLine{00600\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (minmum\_arc-\/>weight\ <\ threshold)}
\DoxyCodeLine{00601\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00602\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>merge\_vertices(minmum\_arc,\ ptr\_nng);}
\DoxyCodeLine{00603\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ptr\_nng-\/>empty())}
\DoxyCodeLine{00604\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00605\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ minmum\_arc\ =\ ptr\_nng-\/>pop();}
\DoxyCodeLine{00606\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00607\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!ptr\_nng-\/>empty())}
\DoxyCodeLine{00608\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00609\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ptr\_nng-\/>push(minmum\_arc);}
\DoxyCodeLine{00610\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00611\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00612\ \ \ \ \ \}}
\DoxyCodeLine{00613\ }
\DoxyCodeLine{00614\ \ \ \ \ T1\ *purning\_optimization(\textcolor{keywordtype}{double}\ threshold)}
\DoxyCodeLine{00615\ \ \ \ \ \{}
\DoxyCodeLine{00616\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ iter\ =\ 4;}
\DoxyCodeLine{00617\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ *scales\ =\ \textcolor{keyword}{new}\ \textcolor{keywordtype}{double}[iter]\{threshold\ *\ 0.001,\ threshold\ *\ 0.01,\ threshold\ *\ 0.1,\ threshold\};}
\DoxyCodeLine{00618\ }
\DoxyCodeLine{00619\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ iter;\ i++)}
\DoxyCodeLine{00620\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00621\ \ \ \ \ \ \ \ \ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}Iteration:\ "{}}\ <<\ GREEN\_TEXT\ <<\ i\ <<\ RESET\_COLOR\ <<\ \textcolor{stringliteral}{"{}\ scale:\ "{}}\ <<\ scales[i]\ <<\ \textcolor{stringliteral}{"{}\ is\ working..................................................."{}}}
\DoxyCodeLine{00622\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <<\ std::endl;}
\DoxyCodeLine{00623\ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>freeze\_edges(threshold);}
\DoxyCodeLine{00624\ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>suspend\_edges(scales[i]);}
\DoxyCodeLine{00625\ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>global\_best\_optimization(scales[i]);}
\DoxyCodeLine{00626\ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>activate\_edges(State::Suspend);}
\DoxyCodeLine{00627\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00628\ }
\DoxyCodeLine{00629\ \ \ \ \ \ \ \ \ \textcolor{keyword}{delete}[]\ scales;}
\DoxyCodeLine{00630\ }
\DoxyCodeLine{00631\ \ \ \ \ \ \ \ \ std::pair<T1\ *,\ int>\ chains\ =\ this-\/>chaining\_vertice();}
\DoxyCodeLine{00632\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ chains.first;}
\DoxyCodeLine{00633\ \ \ \ \ \}}
\DoxyCodeLine{00634\ }
\DoxyCodeLine{00635\ \ \ \ \ \mbox{\hyperlink{class_edge}{Edge}}\ *region\_construct\_nng(\mbox{\hyperlink{class_vertex}{Vertex}}\ *root,\ \mbox{\hyperlink{class_n_n_g}{NNG}}\ *region\_nng)}
\DoxyCodeLine{00636\ \ \ \ \ \{}
\DoxyCodeLine{00637\ \ \ \ \ \ \ \ \ T1\ *v\ =\ (T1\ *)root;}
\DoxyCodeLine{00638\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (root\ ==\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{00639\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ std::runtime\_error(\textcolor{stringliteral}{"{}Null\ Vertex!"{}});}
\DoxyCodeLine{00640\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ start\_time\ =\ std::chrono::high\_resolution\_clock::now();}
\DoxyCodeLine{00641\ \ \ \ \ \ \ \ \ T2\ *e\_root\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00642\ \ \ \ \ \ \ \ \ T2\ *e\_nil\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00643\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (v\ !=\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{00644\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00645\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ it\ =\ v-\/>edges.begin();\ it\ !=\ v-\/>edges.end();\ ++it)}
\DoxyCodeLine{00646\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00647\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ T2\ *e\ =\ \&this-\/>edges[*it];}
\DoxyCodeLine{00648\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (e\_root\ ==\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{00649\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00650\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ e-\/>is\_checked\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00651\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ e\_root\ =\ e;}
\DoxyCodeLine{00652\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ e\_nil\ =\ e\_root;}
\DoxyCodeLine{00653\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00654\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (e\_root\ !=\ e\ \&\&\ !e-\/>is\_checked)}
\DoxyCodeLine{00655\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00656\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ e-\/>is\_checked\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00657\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ e\_nil-\/>next\_edge\_in\_region\ =\ e;}
\DoxyCodeLine{00658\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ e\_nil\ =\ e;}
\DoxyCodeLine{00659\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00660\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ e-\/>shortest\_arc\_num\ =\ 0;}
\DoxyCodeLine{00661\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00662\ \ \ \ \ \ \ \ \ \ \ \ \ v\ =\ (T1\ *)v-\/>next\_in\_region;}
\DoxyCodeLine{00663\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00664\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (e\_nil\ !=\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{00665\ \ \ \ \ \ \ \ \ \ \ \ \ e\_nil-\/>next\_edge\_in\_region\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00666\ \ \ \ \ \ \ \ \ v\ =\ (T1\ *)root;}
\DoxyCodeLine{00667\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (v\ !=\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{00668\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00669\ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>initial\_direct((T1\ *)v,\ this-\/>edges);}
\DoxyCodeLine{00670\ \ \ \ \ \ \ \ \ \ \ \ \ v\ =\ (T1\ *)v-\/>next\_in\_region;}
\DoxyCodeLine{00671\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00672\ }
\DoxyCodeLine{00673\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ end\_time\ =\ std::chrono::high\_resolution\_clock::now();}
\DoxyCodeLine{00674\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ duration\ =\ std::chrono::duration\_cast<std::chrono::seconds>(end\_time\ -\/\ start\_time);}
\DoxyCodeLine{00675\ \ \ \ \ \ \ \ \ e\_nil\ =\ e\_root;}
\DoxyCodeLine{00676\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (e\_nil\ !=\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{00677\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00678\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (e\_nil-\/>state\ ==\ State::Activate\ \&\&\ e\_nil-\/>shortest\_arc\_num\ ==\ 2)}
\DoxyCodeLine{00679\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00680\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ region\_nng-\/>push(e\_nil);}
\DoxyCodeLine{00681\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00682\ \ \ \ \ \ \ \ \ \ \ \ \ e\_nil\ =\ (T2\ *)e\_nil-\/>next\_edge\_in\_region;}
\DoxyCodeLine{00683\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00684\ }
\DoxyCodeLine{00685\ \ \ \ \ \ \ \ \ start\_time\ =\ std::chrono::high\_resolution\_clock::now();}
\DoxyCodeLine{00686\ \ \ \ \ \ \ \ \ end\_time\ =\ std::chrono::high\_resolution\_clock::now();}
\DoxyCodeLine{00687\ \ \ \ \ \ \ \ \ duration\ =\ std::chrono::duration\_cast<std::chrono::seconds>(end\_time\ -\/\ start\_time);}
\DoxyCodeLine{00688\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ e\_root;}
\DoxyCodeLine{00689\ \ \ \ \ \}}
\DoxyCodeLine{00690\ }
\DoxyCodeLine{00691\ \ \ \ \ \textcolor{keywordtype}{void}\ region\_global\_best\_optimization(std::vector<std::pair<T1\ *,\ int>>\ results,\ \textcolor{keywordtype}{double}\ threshold)}
\DoxyCodeLine{00692\ \ \ \ \ \{}
\DoxyCodeLine{00693\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ it\ =\ results.begin();\ it\ !=\ results.end();\ ++it)}
\DoxyCodeLine{00694\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00695\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_vertex}{Vertex}}\ *root\ =\ it-\/>first;}
\DoxyCodeLine{00696\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ value\ =\ it-\/>second;}
\DoxyCodeLine{00697\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_n_n_g}{NNG}}\ *region\_nng\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{class_n_n_g}{NNG}}();}
\DoxyCodeLine{00698\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ process\ vertex\ and\ value}}
\DoxyCodeLine{00699\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (root\ !=\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{00700\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00701\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>region\_construct\_nng(root,\ region\_nng);}
\DoxyCodeLine{00702\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00703\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ this-\/>check\_direct(root);}}
\DoxyCodeLine{00704\ }
\DoxyCodeLine{00705\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!region\_nng-\/>empty())}
\DoxyCodeLine{00706\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00707\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_edge}{Edge}}\ *minmum\_arc\ =\ region\_nng-\/>pop();}
\DoxyCodeLine{00708\ }
\DoxyCodeLine{00709\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (minmum\_arc-\/>weight\ <\ threshold)}
\DoxyCodeLine{00710\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00711\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>merge\_vertices(minmum\_arc,\ region\_nng);}
\DoxyCodeLine{00712\ }
\DoxyCodeLine{00713\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (region\_nng-\/>empty())}
\DoxyCodeLine{00714\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00715\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ minmum\_arc\ =\ region\_nng-\/>pop();}
\DoxyCodeLine{00716\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00717\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00718\ }
\DoxyCodeLine{00719\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{delete}\ region\_nng;}
\DoxyCodeLine{00720\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00721\ \ \ \ \ \}}
\DoxyCodeLine{00722\ }
\DoxyCodeLine{00723\ \ \ \ \ \textcolor{keywordtype}{int}\ regionalize(std::vector<std::pair<T1\ *,\ int>>\ results)}
\DoxyCodeLine{00724\ \ \ \ \ \{}
\DoxyCodeLine{00725\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ suspend\_edge\_num\ =\ 0;}
\DoxyCodeLine{00726\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ it\ =\ results.begin();\ it\ !=\ results.end();\ ++it)}
\DoxyCodeLine{00727\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00728\ \ \ \ \ \ \ \ \ \ \ \ \ T1\ *v\ =\ it-\/>first;}
\DoxyCodeLine{00729\ \ \ \ \ \ \ \ \ \ \ \ \ T1\ *other\_v\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00730\ \ \ \ \ \ \ \ \ \ \ \ \ v-\/>direct\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00731\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ process\ vertex\ and\ related\ edges}}
\DoxyCodeLine{00732\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (v\ !=\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{00733\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00734\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ it\ =\ v-\/>edges.begin();\ it\ !=\ v-\/>edges.end();)}
\DoxyCodeLine{00735\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00736\ }
\DoxyCodeLine{00737\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_edge}{Edge}}\ *e\ =\ \&this-\/>edges[*it];}
\DoxyCodeLine{00738\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ T1\ *left\_vertex\ =\ (T1\ *)e-\/>left\_vertex;}
\DoxyCodeLine{00739\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ T1\ *right\_vertex\ =\ (T1\ *)e-\/>right\_vertex;}
\DoxyCodeLine{00740\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ e-\/>shortest\_arc\_num\ =\ 0;}
\DoxyCodeLine{00741\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (left\_vertex\ ==\ v)}
\DoxyCodeLine{00742\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ other\_v\ =\ right\_vertex;}
\DoxyCodeLine{00743\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00744\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ other\_v\ =\ left\_vertex;}
\DoxyCodeLine{00745\ }
\DoxyCodeLine{00746\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((left\_vertex-\/>bits\_num\ ==\ right\_vertex-\/>bits\_num\ \&\&\ left\_vertex-\/>bit\_sign\ !=\ right\_vertex-\/>bit\_sign)\ ||}
\DoxyCodeLine{00747\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ left\_vertex-\/>bits\_num\ !=\ right\_vertex-\/>bits\_num)}
\DoxyCodeLine{00748\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00749\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ other\_v-\/>remove\_edge(*it);}
\DoxyCodeLine{00750\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ it\ =\ v-\/>edges.erase(it);\ \textcolor{comment}{//\ ʹ{\ucr}÷{\ucr}{\ucr}{\ucr}ֵ{\ucr}{\ucr}{\ucr}µ{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}}}
\DoxyCodeLine{00751\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ e-\/>state\ =\ State::Suspend;}
\DoxyCodeLine{00752\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ suspend\_edge\_num++;}
\DoxyCodeLine{00753\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00754\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00755\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00756\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ++it;\ \textcolor{comment}{//\ ֻ{\ucr}е{\ucr}û{\ucr}{\ucr}ɾ{\ucr}{\ucr}Ԫ{\ucr}{\ucr}ʱ{\ucr}ŵ{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}}}
\DoxyCodeLine{00757\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00758\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00759\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ v-\/>edges.shrink\_to\_fit();\ \textcolor{comment}{//\ {\ucr}{\ucr}ѭ{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}һ{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}ڴ{\ucr}}}
\DoxyCodeLine{00760\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ v\ =\ (T1\ *)v-\/>next\_in\_region;}
\DoxyCodeLine{00761\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00762\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00763\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ suspend\_edge\_num;}
\DoxyCodeLine{00764\ \ \ \ \ \}}
\DoxyCodeLine{00765\ }
\DoxyCodeLine{00766\ \ \ \ \ T1\ *region\_optimization(\textcolor{keywordtype}{double}\ threshold,\ \textcolor{keywordtype}{int}\ region\_size\ =\ 2500)}
\DoxyCodeLine{00767\ \ \ \ \ \{}
\DoxyCodeLine{00768\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ iter\ =\ 5;}
\DoxyCodeLine{00769\ \ \ \ \ \ \ \ \ T1\ *root\ =\ \&this-\/>vertice[0];}
\DoxyCodeLine{00770\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ *scales\ =\ \textcolor{keyword}{new}\ \textcolor{keywordtype}{double}[iter]\{threshold\ *\ 0.001,\ threshold\ *\ 0.01,\ threshold\ *\ 0.1,\ threshold,\ threshold\};}
\DoxyCodeLine{00771\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ double*\ scales\ =\ new\ double[iter]\ \{\ \ threshold\ *\ 0.001,\ threshold\ *\ 0.01,\ threshold\ \};}}
\DoxyCodeLine{00772\ \ \ \ \ \ \ \ \ std::pair<T1\ *,\ int>\ chains;}
\DoxyCodeLine{00773\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ iter;\ i++)}
\DoxyCodeLine{00774\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00775\ \ \ \ \ \ \ \ \ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}Iter\ "{}}\ <<\ i\ +\ 1\ <<\ \textcolor{stringliteral}{"{}:"{}}\ <<\ std::endl;}
\DoxyCodeLine{00776\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ std::vector<std::pair<Vertex*,\ int>>\ results\ =\ this-\/>partition\_dataset\_by\_kd\_tree(root,\ 40000,\ 10);}}
\DoxyCodeLine{00777\ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<std::pair<T1\ *,\ int>>\ results;}
\DoxyCodeLine{00778\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (i\ <\ iter\ -\/\ 1)}
\DoxyCodeLine{00779\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00780\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ results\ =\ this-\/>partition\_dataset\_by\_kd\_tree(root,\ region\_size);}
\DoxyCodeLine{00781\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00782\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00783\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00784\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ results.push\_back(chains);}
\DoxyCodeLine{00785\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00786\ }
\DoxyCodeLine{00787\ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>regionalize(results);\ \textcolor{comment}{//\ regionalize\ the\ vertice}}
\DoxyCodeLine{00788\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ int\ cur\_size\ =\ this-\/>check\_data\_size\_in\_region();}}
\DoxyCodeLine{00789\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ std::cout\ <<\ "{}Data\ size\ after\ func\ regionalize():\ "{}\ <<\ cur\_size\ <<\ std::endl;}}
\DoxyCodeLine{00790\ }
\DoxyCodeLine{00791\ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>region\_global\_best\_optimization(results,\ scales[i]);\ \textcolor{comment}{//\ global\ optimisation\ in\ each\ region}}
\DoxyCodeLine{00792\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ cur\_size\ =\ this-\/>check\_data\_size\_in\_output();}}
\DoxyCodeLine{00793\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ std::cout\ <<\ "{}Data\ size\ after\ func\ optimization():\ "{}\ <<\ cur\_size\ <<\ std::endl;}}
\DoxyCodeLine{00794\ }
\DoxyCodeLine{00795\ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>activate\_edges(State::Suspend);}
\DoxyCodeLine{00796\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ {\ucr}{\ucr}{\ucr}{\ucr}Ҫ{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}ڼ{\ucr}{\ucr}{\ucr}״̬{\ucr}{\ucr}vertex{\ucr}{\ucr}{\ucr}´{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}}}
\DoxyCodeLine{00797\ \ \ \ \ \ \ \ \ \ \ \ \ chains\ =\ this-\/>chaining\_vertice();}
\DoxyCodeLine{00798\ \ \ \ \ \ \ \ \ \ \ \ \ root\ =\ chains.first;}
\DoxyCodeLine{00799\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ num\ =\ chains.second;}
\DoxyCodeLine{00800\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ std::cout\ <<\ "{}Data\ size\ after\ chaining\_vertice:\ "{}\ <<\ num\ <<\ std::endl;}}
\DoxyCodeLine{00801\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ cur\_num\ =\ 0;}
\DoxyCodeLine{00802\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_vertex}{Vertex}}\ *nil\ =\ root;}
\DoxyCodeLine{00803\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (nil\ !=\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{00804\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00805\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ nil\ =\ nil-\/>next\_in\_region;}
\DoxyCodeLine{00806\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cur\_num++;}
\DoxyCodeLine{00807\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00808\ \ \ \ \ \ \ \ \ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}Num:\ "{}}\ <<\ cur\_num\ <<\ std::endl;}
\DoxyCodeLine{00809\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00810\ }
\DoxyCodeLine{00811\ \ \ \ \ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}End\ merge"{}}\ <<\ std::endl;}
\DoxyCodeLine{00812\ \ \ \ \ \ \ \ \ \textcolor{keyword}{delete}[]\ scales;}
\DoxyCodeLine{00813\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ root;}
\DoxyCodeLine{00814\ \ \ \ \ \}}
\DoxyCodeLine{00815\ }
\DoxyCodeLine{00816\ \ \ \ \ T1\ *cycle\_optimization(\textcolor{keywordtype}{double}\ threshold)}
\DoxyCodeLine{00817\ \ \ \ \ \{}
\DoxyCodeLine{00818\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ iter\_num\ =\ 0;}
\DoxyCodeLine{00819\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ stop\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00820\ }
\DoxyCodeLine{00821\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ num\_less\_10000\ =\ 0;}
\DoxyCodeLine{00822\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{long}\ \textcolor{keywordtype}{long}\ merge\_time\ =\ 0;}
\DoxyCodeLine{00823\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{long}\ \textcolor{keywordtype}{long}\ nng\_time\ =\ 0;}
\DoxyCodeLine{00824\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{long}\ \textcolor{keywordtype}{long}\ activate\_time\ =\ 0;}
\DoxyCodeLine{00825\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{long}\ \textcolor{keywordtype}{long}\ update\_time\ =\ 0;}
\DoxyCodeLine{00826\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (!stop)}
\DoxyCodeLine{00827\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00828\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ construct\ nng}}
\DoxyCodeLine{00829\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ nng\_start\_time\ =\ std::chrono::high\_resolution\_clock::now();}
\DoxyCodeLine{00830\ }
\DoxyCodeLine{00831\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_n_n_g}{NNG}}\ *region\_nng\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{class_n_n_g}{NNG}}();}
\DoxyCodeLine{00832\ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>construct\_nng(region\_nng);}
\DoxyCodeLine{00833\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ nng\_end\_time\ =\ std::chrono::high\_resolution\_clock::now();}
\DoxyCodeLine{00834\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ nng\_duration\ =\ std::chrono::duration\_cast<std::chrono::milliseconds>(nng\_end\_time\ -\/\ nng\_start\_time);}
\DoxyCodeLine{00835\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{long}\ \textcolor{keywordtype}{long}\ nng\_time\_iter\ =\ nng\_duration.count();}
\DoxyCodeLine{00836\ \ \ \ \ \ \ \ \ \ \ \ \ nng\_time\ +=\ nng\_time\_iter;}
\DoxyCodeLine{00837\ }
\DoxyCodeLine{00838\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ merge\_start\_time\ =\ std::chrono::high\_resolution\_clock::now();}
\DoxyCodeLine{00839\ \ \ \ \ \ \ \ \ \ \ \ \ std::pair<bool,\ int>\ result\ =\ this-\/>cycle\_best\_optimisation(threshold,\ region\_nng);}
\DoxyCodeLine{00840\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ merge\_end\_time\ =\ std::chrono::high\_resolution\_clock::now();}
\DoxyCodeLine{00841\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ merge\_duration\ =\ std::chrono::duration\_cast<std::chrono::milliseconds>(merge\_end\_time\ -\/\ merge\_start\_time);}
\DoxyCodeLine{00842\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{long}\ \textcolor{keywordtype}{long}\ merge\_time\_iter\ =\ merge\_duration.count();}
\DoxyCodeLine{00843\ \ \ \ \ \ \ \ \ \ \ \ \ merge\_time\ +=\ merge\_time\_iter;}
\DoxyCodeLine{00844\ }
\DoxyCodeLine{00845\ \ \ \ \ \ \ \ \ \ \ \ \ stop\ =\ result.first;}
\DoxyCodeLine{00846\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ merge\_num\ =\ result.second;}
\DoxyCodeLine{00847\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ std::cout\ <<\ "{}Merge\ num:\ "{}\ <<\ merge\_num\ <<\ std::endl;}}
\DoxyCodeLine{00848\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ objects\ =\ this-\/>check\_data\_size\_in\_region();}
\DoxyCodeLine{00849\ \ \ \ \ \ \ \ \ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}Obj\ num:\ "{}}\ <<\ GREEN\_TEXT\ <<\ objects\ <<\ RESET\_COLOR\ <<\ \textcolor{stringliteral}{"{}\ Merge\ num:\ "{}}\ <<\ GREEN\_TEXT\ <<\ merge\_num\ <<\ RESET\_COLOR\ <<\ \textcolor{stringliteral}{"{}\ "{}};}
\DoxyCodeLine{00850\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ std::cout\ <<\ "{}Obj\ +\ Merge:\ "{}\ <<\ objects\ +\ merge\_num\ <<\ std::endl;}}
\DoxyCodeLine{00851\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ activate\ edge}}
\DoxyCodeLine{00852\ }
\DoxyCodeLine{00853\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ activate\_start\_time\ =\ std::chrono::high\_resolution\_clock::now();}
\DoxyCodeLine{00854\ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>activate\_edges(State::Suspend,\ \textcolor{stringliteral}{"{}123"{}});}
\DoxyCodeLine{00855\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ activate\_end\_time\ =\ std::chrono::high\_resolution\_clock::now();}
\DoxyCodeLine{00856\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ activate\_duration\ =\ std::chrono::duration\_cast<std::chrono::milliseconds>(activate\_end\_time\ -\/\ activate\_start\_time);}
\DoxyCodeLine{00857\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{long}\ \textcolor{keywordtype}{long}\ activate\_time\_iter\ =\ activate\_duration.count();}
\DoxyCodeLine{00858\ \ \ \ \ \ \ \ \ \ \ \ \ activate\_time\ +=\ activate\_time\_iter;}
\DoxyCodeLine{00859\ }
\DoxyCodeLine{00860\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ update\_start\_time\ =\ std::chrono::high\_resolution\_clock::now();}
\DoxyCodeLine{00861\ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>update\_weights(State::Suspend);}
\DoxyCodeLine{00862\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ update\_end\_time\ =\ std::chrono::high\_resolution\_clock::now();}
\DoxyCodeLine{00863\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ update\_duration\ =\ std::chrono::duration\_cast<std::chrono::milliseconds>(update\_end\_time\ -\/\ update\_start\_time);}
\DoxyCodeLine{00864\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{long}\ \textcolor{keywordtype}{long}\ update\_time\_iter\ =\ update\_duration.count();}
\DoxyCodeLine{00865\ \ \ \ \ \ \ \ \ \ \ \ \ update\_time\ +=\ update\_time\_iter;}
\DoxyCodeLine{00866\ }
\DoxyCodeLine{00867\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ iter\_time\ =\ std::chrono::duration\_cast<std::chrono::milliseconds>(update\_end\_time\ -\/\ nng\_start\_time);}
\DoxyCodeLine{00868\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ seconds\ =\ iter\_time.count()\ /\ 1000;}
\DoxyCodeLine{00869\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (seconds\ ==\ 0)}
\DoxyCodeLine{00870\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ seconds\ =\ 1;}
\DoxyCodeLine{00871\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ merge\_fre\ =\ merge\_num\ /\ seconds;}
\DoxyCodeLine{00872\ \ \ \ \ \ \ \ \ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}NNG\ time:\ "{}}\ <<\ GREEN\_TEXT\ <<\ nng\_time\_iter\ <<\ RESET\_COLOR\ <<\ \textcolor{stringliteral}{"{}ms"{}}}
\DoxyCodeLine{00873\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}\ Merge\ time:\ "{}}\ <<\ GREEN\_TEXT\ <<\ merge\_time\_iter\ <<\ RESET\_COLOR\ <<\ \textcolor{stringliteral}{"{}ms"{}}}
\DoxyCodeLine{00874\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}\ Edge\ time:\ "{}}\ <<\ GREEN\_TEXT\ <<\ activate\_time\_iter\ <<\ RESET\_COLOR\ <<\ \textcolor{stringliteral}{"{}ms"{}}}
\DoxyCodeLine{00875\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}\ Update\ time:\ "{}}\ <<\ GREEN\_TEXT\ <<\ update\_time\_iter\ <<\ RESET\_COLOR\ <<\ \textcolor{stringliteral}{"{}ms"{}}}
\DoxyCodeLine{00876\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}\ Iter\ time:\ "{}}\ <<\ GREEN\_TEXT\ <<\ iter\_time.count()\ <<\ RESET\_COLOR\ <<\ \textcolor{stringliteral}{"{}s"{}}}
\DoxyCodeLine{00877\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}\ Merge\ fre:\ "{}}\ <<\ GREEN\_TEXT\ <<\ merge\_fre\ <<\ RESET\_COLOR\ <<\ \textcolor{stringliteral}{"{}\ thousand\ pairs/s"{}}\ <<\ std::endl;}
\DoxyCodeLine{00878\ }
\DoxyCodeLine{00879\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*if\ (merge\_num\ <\ 25000)}}
\DoxyCodeLine{00880\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \{}}
\DoxyCodeLine{00881\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ num\_less\_10000\ +=\ merge\_num;}}
\DoxyCodeLine{00882\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ merge\_num\ =\ 0;}}
\DoxyCodeLine{00883\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ NNG*\ region\_nng11\ =\ new\ NNG();}}
\DoxyCodeLine{00884\ \textcolor{comment}{}}
\DoxyCodeLine{00885\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>construct\_nng(region\_nng11);}}
\DoxyCodeLine{00886\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Edge*\ minmum\_arc;}}
\DoxyCodeLine{00887\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ if\ (!region\_nng11-\/>empty())}}
\DoxyCodeLine{00888\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}}
\DoxyCodeLine{00889\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ minmum\_arc\ =\ region\_nng11-\/>pop();}}
\DoxyCodeLine{00890\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ while\ (minmum\_arc-\/>weight\ <\ threshold)}}
\DoxyCodeLine{00891\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}}
\DoxyCodeLine{00892\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>merge\_vertices(minmum\_arc,\ region\_nng11);}}
\DoxyCodeLine{00893\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ merge\_num++;}}
\DoxyCodeLine{00894\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ if\ (region\_nng11-\/>empty())\ break;}}
\DoxyCodeLine{00895\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ minmum\_arc\ =\ region\_nng11-\/>pop();}}
\DoxyCodeLine{00896\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}}
\DoxyCodeLine{00897\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::cout\ <<\ "{}minmum\_arc\ weight:\ "{}\ <<\ minmum\_arc-\/>weight\ <<\ std::endl;}}
\DoxyCodeLine{00898\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}}
\DoxyCodeLine{00899\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::cout\ <<\ "{}Merge\ num:\ "{}\ <<\ merge\_num\ <<\ std::endl;}}
\DoxyCodeLine{00900\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stop\ =\ true;}}
\DoxyCodeLine{00901\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ delete\ region\_nng11;}}
\DoxyCodeLine{00902\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \}*/}}
\DoxyCodeLine{00903\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{delete}\ region\_nng;}
\DoxyCodeLine{00904\ \ \ \ \ \ \ \ \ \ \ \ \ iter\_num++;}
\DoxyCodeLine{00905\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00906\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ std::cout\ <<\ "{}num\_less\_10000\ num:\ "{}\ <<\ num\_less\_10000\ <<\ std::endl;}}
\DoxyCodeLine{00907\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ std::cout\ <<\ "{}End\ merge:\ iter\ mun\ =\ "{}<<\ iter\_num\ <<\ std::endl;}}
\DoxyCodeLine{00908\ }
\DoxyCodeLine{00909\ \ \ \ \ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}Total\ NNG\ time:\ "{}}\ <<\ GREEN\_TEXT\ <<\ nng\_time\ /\ 1000\ <<\ RESET\_COLOR\ <<\ \textcolor{stringliteral}{"{}s"{}}\ <<\ std::endl}
\DoxyCodeLine{00910\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}Total\ merge\ time:\ "{}}\ <<\ GREEN\_TEXT\ <<\ merge\_time\ /\ 1000\ <<\ RESET\_COLOR\ <<\ \textcolor{stringliteral}{"{}s"{}}\ <<\ std::endl}
\DoxyCodeLine{00911\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}Total\ edge\ time:\ "{}}\ <<\ GREEN\_TEXT\ <<\ activate\_time\ /\ 1000\ <<\ RESET\_COLOR\ <<\ \textcolor{stringliteral}{"{}s"{}}\ <<\ std::endl}
\DoxyCodeLine{00912\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}Total\ update\ time:\ "{}}\ <<\ GREEN\_TEXT\ <<\ update\_time\ /\ 1000\ <<\ RESET\_COLOR\ <<\ \textcolor{stringliteral}{"{}s"{}}\ <<\ std::endl;}
\DoxyCodeLine{00913\ }
\DoxyCodeLine{00914\ \ \ \ \ \ \ \ \ std::pair<T1\ *,\ int>\ chains\ =\ this-\/>chaining\_vertice();}
\DoxyCodeLine{00915\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ chains.first;}
\DoxyCodeLine{00916\ \ \ \ \ \}}
\DoxyCodeLine{00917\ }
\DoxyCodeLine{00918\ \ \ \ \ T1\ *region\_pruning\_optimization(\textcolor{keywordtype}{double}\ threshold,\ \textcolor{keywordtype}{int}\ region\_size)}
\DoxyCodeLine{00919\ \ \ \ \ \{}
\DoxyCodeLine{00920\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ iter\ =\ 5;}
\DoxyCodeLine{00921\ \ \ \ \ \ \ \ \ T1\ *root\ =\ \&this-\/>vertice[0];}
\DoxyCodeLine{00922\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ double*\ scales\ =\ new\ double[iter]\ \{\ threshold\ *\ 0.001,\ threshold\ *\ 0.01,\ threshold\ *\ 0.1,\ threshold\ \};}}
\DoxyCodeLine{00923\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ *scales\ =\ \textcolor{keyword}{new}\ \textcolor{keywordtype}{double}[iter]\{threshold\ *\ 0.001,\ threshold\ *\ 0.01,\ threshold\ *\ 0.1,\ threshold,\ threshold\};}
\DoxyCodeLine{00924\ \ \ \ \ \ \ \ \ std::pair<T1\ *,\ int>\ chains;}
\DoxyCodeLine{00925\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ iter;\ i++)}
\DoxyCodeLine{00926\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00927\ \ \ \ \ \ \ \ \ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}Iter\ "{}}\ <<\ i\ +\ 1\ <<\ \textcolor{stringliteral}{"{}:"{}}\ <<\ std::endl;}
\DoxyCodeLine{00928\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ std::vector<std::pair<Vertex*,\ int>>\ results\ =\ this-\/>partition\_dataset\_by\_kd\_tree(root,\ 40000,\ 10);}}
\DoxyCodeLine{00929\ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<std::pair<T1\ *,\ int>>\ results;}
\DoxyCodeLine{00930\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (threshold\ ==\ scales[i])}
\DoxyCodeLine{00931\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>freeze\_edges(threshold);}
\DoxyCodeLine{00932\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (i\ <\ iter\ -\/\ 1)}
\DoxyCodeLine{00933\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00934\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ results\ =\ this-\/>partition\_dataset\_by\_kd\_tree(root,\ 40000,\ 10);}}
\DoxyCodeLine{00935\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ results\ =\ this-\/>partition\_dataset\_by\_kd\_tree(root,\ region\_size);}
\DoxyCodeLine{00936\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00937\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00938\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00939\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ results.push\_back(chains);}
\DoxyCodeLine{00940\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00941\ }
\DoxyCodeLine{00942\ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>regionalize(results);\ \textcolor{comment}{//\ regionalize\ the\ vertice}}
\DoxyCodeLine{00943\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ int\ cur\_size\ =\ this-\/>check\_data\_size\_in\_region();}}
\DoxyCodeLine{00944\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ std::cout\ <<\ "{}Data\ size\ after\ func\ regionalize():\ "{}\ <<\ cur\_size\ <<\ std::endl;}}
\DoxyCodeLine{00945\ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>suspend\_edges(scales[i]);}
\DoxyCodeLine{00946\ }
\DoxyCodeLine{00947\ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>region\_global\_best\_optimization(results,\ scales[i]);\ \textcolor{comment}{//\ global\ optimisation\ in\ each\ region}}
\DoxyCodeLine{00948\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ cur\_size\ =\ this-\/>check\_data\_size\_in\_output();}}
\DoxyCodeLine{00949\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ std::cout\ <<\ "{}Data\ size\ after\ func\ optimization():\ "{}\ <<\ cur\_size\ <<\ std::endl;}}
\DoxyCodeLine{00950\ }
\DoxyCodeLine{00951\ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>activate\_edges(State::Suspend);}
\DoxyCodeLine{00952\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ {\ucr}{\ucr}{\ucr}{\ucr}Ҫ{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}ڼ{\ucr}{\ucr}{\ucr}״̬{\ucr}{\ucr}vertex{\ucr}{\ucr}{\ucr}´{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}}}
\DoxyCodeLine{00953\ \ \ \ \ \ \ \ \ \ \ \ \ chains\ =\ this-\/>chaining\_vertice();}
\DoxyCodeLine{00954\ \ \ \ \ \ \ \ \ \ \ \ \ root\ =\ chains.first;}
\DoxyCodeLine{00955\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ num\ =\ chains.second;}
\DoxyCodeLine{00956\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ std::cout\ <<\ "{}Data\ size\ after\ chaining\_vertice:\ "{}\ <<\ num\ <<\ std::endl;}}
\DoxyCodeLine{00957\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00958\ }
\DoxyCodeLine{00959\ \ \ \ \ \ \ \ \ \textcolor{keyword}{delete}[]\ scales;}
\DoxyCodeLine{00960\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ root;}
\DoxyCodeLine{00961\ \ \ \ \ \}}
\DoxyCodeLine{00962\ }
\DoxyCodeLine{00963\ \ \ \ \ T1\ *region\_cycle\_optimization(\textcolor{keywordtype}{double}\ threshold,\ \textcolor{keywordtype}{int}\ region\_size)}
\DoxyCodeLine{00964\ \ \ \ \ \{}
\DoxyCodeLine{00965\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ iter\ =\ 2;}
\DoxyCodeLine{00966\ \ \ \ \ \ \ \ \ T1\ *root\ =\ \&this-\/>vertice[0];}
\DoxyCodeLine{00967\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ *scales\ =\ \textcolor{keyword}{new}\ \textcolor{keywordtype}{double}[iter]\{threshold\ *\ 0.1,\ threshold\};}
\DoxyCodeLine{00968\ \ \ \ \ \ \ \ \ std::pair<T1\ *,\ int>\ chains;}
\DoxyCodeLine{00969\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ 2;\ i++)}
\DoxyCodeLine{00970\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00971\ \ \ \ \ \ \ \ \ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}Iter\ "{}}\ <<\ i\ +\ 1\ <<\ \textcolor{stringliteral}{"{}:"{}}\ <<\ std::endl;}
\DoxyCodeLine{00972\ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<std::pair<T1\ *,\ int>>\ results;}
\DoxyCodeLine{00973\ \ \ \ \ \ \ \ \ \ \ \ \ results\ =\ this-\/>partition\_dataset\_by\_kd\_tree(root,\ region\_size);}
\DoxyCodeLine{00974\ \ \ \ \ \ \ \ \ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}Set\ num:\ "{}}\ <<\ results.size()\ <<\ std::endl;}
\DoxyCodeLine{00975\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ suspend\_edge\_num\ =\ this-\/>regionalize(results);\ \textcolor{comment}{//\ regionalize\ the\ vertice}}
\DoxyCodeLine{00976\ }
\DoxyCodeLine{00977\ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>region\_cycle\_best\_optimization(results,\ scales[i]);\ \textcolor{comment}{//\ global\ optimisation\ in\ each\ region}}
\DoxyCodeLine{00978\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ std::cout\ <<\ "{}Regionalize\ edge\ num:\ "{}\ <<\ suspend\_edge\_num\ <<\ std::endl;}}
\DoxyCodeLine{00979\ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>activate\_edges(State::Suspend);}
\DoxyCodeLine{00980\ }
\DoxyCodeLine{00981\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ {\ucr}{\ucr}{\ucr}{\ucr}Ҫ{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}ڼ{\ucr}{\ucr}{\ucr}״̬{\ucr}{\ucr}vertex{\ucr}{\ucr}{\ucr}´{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}}}
\DoxyCodeLine{00982\ \ \ \ \ \ \ \ \ \ \ \ \ chains\ =\ this-\/>chaining\_vertice();}
\DoxyCodeLine{00983\ \ \ \ \ \ \ \ \ \ \ \ \ root\ =\ chains.first;}
\DoxyCodeLine{00984\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ num\ =\ chains.second;}
\DoxyCodeLine{00985\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00986\ \ \ \ \ \ \ \ \ \textcolor{keyword}{delete}[]\ scales;}
\DoxyCodeLine{00987\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ root;}
\DoxyCodeLine{00988\ \ \ \ \ \}}
\DoxyCodeLine{00989\ }
\DoxyCodeLine{00990\ \ \ \ \ \textcolor{keywordtype}{void}\ region\_cycle\_best\_optimization(std::vector<std::pair<T1\ *,\ int>>\ results,\ \textcolor{keywordtype}{double}\ threshold,\ \textcolor{keywordtype}{bool}\ is\_freeze\ =\ \textcolor{keyword}{false})}
\DoxyCodeLine{00991\ \ \ \ \ \{}
\DoxyCodeLine{00992\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ idx\ =\ 1;}
\DoxyCodeLine{00993\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ it\ =\ results.begin();\ it\ !=\ results.end();\ ++it)}
\DoxyCodeLine{00994\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00995\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ total\_merge\_num\ =\ 0;}
\DoxyCodeLine{00996\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ start\_time\ =\ std::chrono::high\_resolution\_clock::now();}
\DoxyCodeLine{00997\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_vertex}{Vertex}}\ *v\_root\ =\ it-\/>first;}
\DoxyCodeLine{00998\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ stop\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00999\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (!stop)}
\DoxyCodeLine{01000\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01001\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ construct\ nng}}
\DoxyCodeLine{01002\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!is\_freeze)}
\DoxyCodeLine{01003\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>freeze\_edges(threshold);}
\DoxyCodeLine{01004\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_n_n_g}{NNG}}\ *region\_nng\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{class_n_n_g}{NNG}}();}
\DoxyCodeLine{01005\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_edge}{Edge}}\ *e\_root\ =\ this-\/>region\_construct\_nng(v\_root,\ region\_nng);}
\DoxyCodeLine{01006\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ obj\_num\ =\ this-\/>check\_data\_size\_in\_region(v\_root);}
\DoxyCodeLine{01007\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::pair<bool,\ int>\ result\ =\ this-\/>cycle\_best\_optimisation(threshold,\ region\_nng);}
\DoxyCodeLine{01008\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stop\ =\ result.first;}
\DoxyCodeLine{01009\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ merge\_num\ =\ result.second;}
\DoxyCodeLine{01010\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ total\_merge\_num\ +=\ merge\_num;}
\DoxyCodeLine{01011\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ e\_root\ =\ this-\/>activate\_edges\_in\_region(e\_root);}
\DoxyCodeLine{01012\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>update\_weight\_in\_region(e\_root,\ State::Suspend);}
\DoxyCodeLine{01013\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ v\_root\ =\ this-\/>update\_root\_in\_region(v\_root);}
\DoxyCodeLine{01014\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ obj\_new\_num\ =\ this-\/>check\_data\_size\_in\_region(v\_root);}
\DoxyCodeLine{01015\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}Obj\ num:\ "{}}\ <<\ obj\_num\ <<\ \textcolor{stringliteral}{"{}\ Merge:\ "{}}\ <<\ merge\_num}
\DoxyCodeLine{01016\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}\ New\ num:\ "{}}\ <<\ obj\_new\_num}
\DoxyCodeLine{01017\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}\ Plus:\ "{}}\ <<\ merge\_num\ +\ obj\_new\_num}
\DoxyCodeLine{01018\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <<\ std::endl;}
\DoxyCodeLine{01019\ }
\DoxyCodeLine{01020\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (merge\_num\ <\ 20000)}
\DoxyCodeLine{01021\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01022\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ merge\_num\ =\ 0;}
\DoxyCodeLine{01023\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_n_n_g}{NNG}}\ *region\_nng11\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{class_n_n_g}{NNG}}();}
\DoxyCodeLine{01024\ }
\DoxyCodeLine{01025\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>region\_construct\_nng(v\_root,\ region\_nng11);}
\DoxyCodeLine{01026\ }
\DoxyCodeLine{01027\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_edge}{Edge}}\ *minmum\_arc;}
\DoxyCodeLine{01028\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!region\_nng11-\/>empty())}
\DoxyCodeLine{01029\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01030\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ minmum\_arc\ =\ region\_nng11-\/>pop();}
\DoxyCodeLine{01031\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (minmum\_arc-\/>weight\ <\ threshold)}
\DoxyCodeLine{01032\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01033\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>merge\_vertices(minmum\_arc,\ region\_nng11);}
\DoxyCodeLine{01034\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ merge\_num++;}
\DoxyCodeLine{01035\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (region\_nng11-\/>empty())}
\DoxyCodeLine{01036\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01037\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ minmum\_arc\ =\ region\_nng11-\/>pop();}
\DoxyCodeLine{01038\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01039\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ std::cout\ <<\ "{}minmum\_arc\ weight:\ "{}\ <<\ minmum\_arc-\/>weight\ <<\ std::endl;}}
\DoxyCodeLine{01040\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01041\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ std::cout\ <<\ "{}Merge\ num:\ "{}\ <<\ merge\_num\ <<\ std::endl;}}
\DoxyCodeLine{01042\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ total\_merge\_num\ +=\ merge\_num;}
\DoxyCodeLine{01043\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stop\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{01044\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{delete}\ region\_nng11;}
\DoxyCodeLine{01045\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01046\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ std::cout\ <<\ "{}Merge\ num:\ "{}\ <<\ merge\_num\ <<\ std::endl;}}
\DoxyCodeLine{01047\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{delete}\ region\_nng;}
\DoxyCodeLine{01048\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01049\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ end\_time\ =\ std::chrono::high\_resolution\_clock::now();}
\DoxyCodeLine{01050\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ activate\_duration\ =\ std::chrono::duration\_cast<std::chrono::milliseconds>(end\_time\ -\/\ start\_time);}
\DoxyCodeLine{01051\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ activate\_time\_iter\ =\ activate\_duration.count()\ /\ 1000.0;}
\DoxyCodeLine{01052\ \ \ \ \ \ \ \ \ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}Set\ "{}}\ <<\ GREEN\_TEXT\ <<\ idx\ <<\ RESET\_COLOR\ <<\ \textcolor{stringliteral}{"{}\ Total\ num:\ "{}}\ <<\ GREEN\_TEXT\ <<\ total\_merge\_num\ <<\ RESET\_COLOR\ <<\ \textcolor{stringliteral}{"{}\ Total\ time:\ "{}}\ <<\ GREEN\_TEXT\ <<\ activate\_time\_iter\ <<\ RESET\_COLOR\ <<\ \textcolor{stringliteral}{"{}s"{}}\ <<\ std::endl;}
\DoxyCodeLine{01053\ \ \ \ \ \ \ \ \ \ \ \ \ idx++;}
\DoxyCodeLine{01054\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01055\ \ \ \ \ \}}
\DoxyCodeLine{01056\ }
\DoxyCodeLine{01057\ \ \ \ \ \textcolor{keywordtype}{void}\ process\_unit\_region\_cycle\_best\_parallel\_optimization(std::pair<T1\ *,\ int>\ \&result,\ \textcolor{keywordtype}{int}\ idx,\ \textcolor{keywordtype}{double}\ threshold,\ \textcolor{keywordtype}{bool}\ is\_freeze)}
\DoxyCodeLine{01058\ \ \ \ \ \{}
\DoxyCodeLine{01059\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ total\_merge\_num\ =\ 0;}
\DoxyCodeLine{01060\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_vertex}{Vertex}}\ *v\_root\ =\ result.first;}
\DoxyCodeLine{01061\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ stop\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{01062\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ mini\_W\ =\ 0.0;}
\DoxyCodeLine{01063\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_edge}{Edge}}\ *e\_root\_test\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{01064\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (!stop)}
\DoxyCodeLine{01065\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01066\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ construct\ nng}}
\DoxyCodeLine{01067\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!is\_freeze)}
\DoxyCodeLine{01068\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>freeze\_edges(threshold);}
\DoxyCodeLine{01069\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_n_n_g}{NNG}}\ *region\_nng\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{class_n_n_g}{NNG}}();}
\DoxyCodeLine{01070\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_edge}{Edge}}\ *e\_root\ =\ this-\/>region\_construct\_nng(v\_root,\ region\_nng);}
\DoxyCodeLine{01071\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ obj\_num\ =\ this-\/>check\_data\_size\_in\_region(v\_root);}
\DoxyCodeLine{01072\ \ \ \ \ \ \ \ \ \ \ \ \ std::pair<bool,\ int>\ result\ =\ this-\/>cycle\_best\_optimisation(threshold,\ region\_nng);}
\DoxyCodeLine{01073\ \ \ \ \ \ \ \ \ \ \ \ \ stop\ =\ result.first;}
\DoxyCodeLine{01074\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ merge\_num\ =\ result.second;}
\DoxyCodeLine{01075\ \ \ \ \ \ \ \ \ \ \ \ \ total\_merge\_num\ +=\ merge\_num;}
\DoxyCodeLine{01076\ \ \ \ \ \ \ \ \ \ \ \ \ e\_root\ =\ this-\/>activate\_edges\_in\_region(e\_root);\ \textcolor{comment}{//\ extrac\ edge\ in\ activate.}}
\DoxyCodeLine{01077\ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>update\_weight\_in\_region(e\_root,\ State::Suspend);}
\DoxyCodeLine{01078\ \ \ \ \ \ \ \ \ \ \ \ \ e\_root\_test\ =\ e\_root;}
\DoxyCodeLine{01079\ \ \ \ \ \ \ \ \ \ \ \ \ v\_root\ =\ this-\/>update\_root\_in\_region(v\_root);}
\DoxyCodeLine{01080\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ obj\_new\_num\ =\ this-\/>check\_data\_size\_in\_region(v\_root);}
\DoxyCodeLine{01081\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ std::cout\ <<\ "{}Obj\ num:\ "{}\ <<\ obj\_num\ <<\ "{}\ Merge:\ "{}\ <<\ merge\_num}}
\DoxyCodeLine{01082\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ <<\ "{}\ New\ num:\ "{}\ <<\ obj\_new\_num}}
\DoxyCodeLine{01083\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ <<\ "{}\ Plus:\ "{}\ <<\ merge\_num\ +\ obj\_new\_num}}
\DoxyCodeLine{01084\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ <<\ std::endl;}}
\DoxyCodeLine{01085\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (merge\_num\ <\ 2000)}
\DoxyCodeLine{01086\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01087\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ merge\_num\ =\ 0;}
\DoxyCodeLine{01088\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_n_n_g}{NNG}}\ *region\_nng11\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{class_n_n_g}{NNG}}();}
\DoxyCodeLine{01089\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>region\_construct\_nng(v\_root,\ region\_nng11);}
\DoxyCodeLine{01090\ }
\DoxyCodeLine{01091\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_edge}{Edge}}\ *minmum\_arc;}
\DoxyCodeLine{01092\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!region\_nng11-\/>empty())}
\DoxyCodeLine{01093\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01094\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ minmum\_arc\ =\ region\_nng11-\/>pop();}
\DoxyCodeLine{01095\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (minmum\_arc-\/>weight\ <\ threshold)}
\DoxyCodeLine{01096\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01097\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>merge\_vertices(minmum\_arc,\ region\_nng11);}
\DoxyCodeLine{01098\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ merge\_num++;}
\DoxyCodeLine{01099\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ mini\_W\ =\ minmum\_arc-\/>weight;}
\DoxyCodeLine{01100\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (region\_nng11-\/>empty())}
\DoxyCodeLine{01101\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01102\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ minmum\_arc\ =\ region\_nng11-\/>pop();}
\DoxyCodeLine{01103\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01104\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ std::cout\ <<\ "{}minmum\_arc\ weight:\ "{}\ <<\ minmum\_arc-\/>weight\ <<\ std::endl;}}
\DoxyCodeLine{01105\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01106\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ std::cout\ <<\ "{}Merge\ num:\ "{}\ <<\ merge\_num\ <<\ std::endl;}}
\DoxyCodeLine{01107\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ e\_root\ =\ this-\/>activate\_edges\_in\_region(e\_root);\ \textcolor{comment}{//\ extrac\ edge\ in\ activate.}}
\DoxyCodeLine{01108\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>update\_weight\_in\_region(e\_root,\ State::Suspend);}
\DoxyCodeLine{01109\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ e\_root\_test\ =\ e\_root;}
\DoxyCodeLine{01110\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ total\_merge\_num\ +=\ merge\_num;}
\DoxyCodeLine{01111\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stop\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{01112\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{delete}\ region\_nng11;}
\DoxyCodeLine{01113\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01114\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ std::cout\ <<\ "{}Merge\ num:\ "{}\ <<\ merge\_num\ <<\ std::endl;}}
\DoxyCodeLine{01115\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{delete}\ region\_nng;}
\DoxyCodeLine{01116\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01117\ \ \ \ \ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}Current\ set\ "{}}\ <<\ GREEN\_TEXT\ <<\ idx\ <<\ RESET\_COLOR\ <<\ \textcolor{stringliteral}{"{};\ minmum\ weight:\ "{}}\ <<\ GREEN\_TEXT\ <<\ mini\_W\ <<\ RESET\_COLOR\ <<\ std::endl;}
\DoxyCodeLine{01118\ }
\DoxyCodeLine{01119\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ int\ e\_root\_test\_suspend\_num\ =\ 0;}}
\DoxyCodeLine{01120\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ while\ (e\_root\_test\ !=\ nullptr)}}
\DoxyCodeLine{01121\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\{}}
\DoxyCodeLine{01122\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ if\ (e\_root\_test-\/>state\ ==\ State::Suspend)}}
\DoxyCodeLine{01123\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ \{}}
\DoxyCodeLine{01124\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ \ e\_root\_test\_suspend\_num++;}}
\DoxyCodeLine{01125\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ \}}}
\DoxyCodeLine{01126\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ e\_root\_test\ =\ e\_root\_test-\/>next\_edge\_in\_region;}}
\DoxyCodeLine{01127\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \}}}
\DoxyCodeLine{01128\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ std::cout\ <<\ "{}Suspend\_num\ "{}\ <<\ GREEN\_TEXT\ <<\ e\_root\_test\_suspend\_num\ <<\ RESET\_COLOR\ <<\ std::endl;}}
\DoxyCodeLine{01129\ \ \ \ \ \}}
\DoxyCodeLine{01130\ }
\DoxyCodeLine{01131\ \ \ \ \ \textcolor{keywordtype}{void}\ region\_cycle\_best\_parallel\_optimization(std::vector<std::pair<T1\ *,\ int>>\ results,\ \textcolor{keywordtype}{double}\ threshold,\ \textcolor{keywordtype}{bool}\ is\_freeze\ =\ \textcolor{keyword}{false})}
\DoxyCodeLine{01132\ \ \ \ \ \{}
\DoxyCodeLine{01133\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ {\ucr}{\ucr}ȡӲ{\ucr}{\ucr}֧{\ucr}ֵ{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}߳{\ucr}{\ucr}{\ucr}}}
\DoxyCodeLine{01134\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ max\_threads\ =\ std::thread::hardware\_concurrency();}
\DoxyCodeLine{01135\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ {\ucr}{\ucr}{\ucr}{\ucr}{\ucr}̳߳{\ucr}}}
\DoxyCodeLine{01136\ \ \ \ \ \ \ \ \ std::vector<std::future<void>>\ futures;}
\DoxyCodeLine{01137\ \ \ \ \ \ \ \ \ vector<T2\ *>\ roots;}
\DoxyCodeLine{01138\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ {\ucr}{\ucr}{\ucr}{\ucr}{\ucr}߳{\ucr}}}
\DoxyCodeLine{01139\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ idx\ =\ 1;}
\DoxyCodeLine{01140\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ it\ =\ results.begin();\ it\ !=\ results.end();\ ++it,\ ++idx)}
\DoxyCodeLine{01141\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01142\ }
\DoxyCodeLine{01143\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ {\ucr}{\ucr}{\ucr}{\ucr}{\ucr}߳{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}Ӳ{\ucr}{\ucr}֧{\ucr}ֵ{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}߳{\ucr}{\ucr}{\ucr}}}
\DoxyCodeLine{01144\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (futures.size()\ >=\ max\_threads)}
\DoxyCodeLine{01145\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01146\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ {\ucr}ȴ{\ucr}һ{\ucr}{\ucr}{\ucr}߳{\ucr}{\ucr}{\ucr}{\ucr}}}
\DoxyCodeLine{01147\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ futures.front().get();}
\DoxyCodeLine{01148\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ futures.erase(futures.begin());}
\DoxyCodeLine{01149\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01150\ }
\DoxyCodeLine{01151\ \ \ \ \ \ \ \ \ \ \ \ \ futures.push\_back(std::async(std::launch::async,}
\DoxyCodeLine{01152\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{keyword}{this},\ it,\ idx,\ threshold,\ is\_freeze]()}
\DoxyCodeLine{01153\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01154\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>process\_unit\_region\_cycle\_best\_parallel\_optimization(*it,\ idx,\ threshold,\ is\_freeze);}
\DoxyCodeLine{01155\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}));}
\DoxyCodeLine{01156\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01157\ }
\DoxyCodeLine{01158\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ {\ucr}ȴ{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}߳{\ucr}{\ucr}{\ucr}{\ucr}}}
\DoxyCodeLine{01159\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ \&future\ :\ futures)}
\DoxyCodeLine{01160\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01161\ \ \ \ \ \ \ \ \ \ \ \ \ future.get();}
\DoxyCodeLine{01162\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01163\ \ \ \ \ \}}
\DoxyCodeLine{01164\ }
\DoxyCodeLine{01165\ \ \ \ \ T1\ *pruning\_cycle\_optimization(\textcolor{keywordtype}{double}\ threshold)}
\DoxyCodeLine{01166\ \ \ \ \ \{}
\DoxyCodeLine{01167\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ iter\_num\ =\ 0;}
\DoxyCodeLine{01168\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ stop\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{01169\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ num\_less\_10000\ =\ 0;}
\DoxyCodeLine{01170\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{long}\ \textcolor{keywordtype}{long}\ merge\_time\ =\ 0;}
\DoxyCodeLine{01171\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{long}\ \textcolor{keywordtype}{long}\ nng\_time\ =\ 0;}
\DoxyCodeLine{01172\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{long}\ \textcolor{keywordtype}{long}\ activate\_time\ =\ 0;}
\DoxyCodeLine{01173\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{long}\ \textcolor{keywordtype}{long}\ update\_time\ =\ 0;}
\DoxyCodeLine{01174\ }
\DoxyCodeLine{01175\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (!stop)}
\DoxyCodeLine{01176\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01177\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ construct\ nng}}
\DoxyCodeLine{01178\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ nng\_start\_time\ =\ std::chrono::high\_resolution\_clock::now();}
\DoxyCodeLine{01179\ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>freeze\_edges(threshold);}
\DoxyCodeLine{01180\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_n_n_g}{NNG}}\ *region\_nng\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{class_n_n_g}{NNG}}();}
\DoxyCodeLine{01181\ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>construct\_nng(region\_nng);}
\DoxyCodeLine{01182\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ nng\_end\_time\ =\ std::chrono::high\_resolution\_clock::now();}
\DoxyCodeLine{01183\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ nng\_duration\ =\ std::chrono::duration\_cast<std::chrono::milliseconds>(nng\_end\_time\ -\/\ nng\_start\_time);}
\DoxyCodeLine{01184\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{long}\ \textcolor{keywordtype}{long}\ nng\_time\_iter\ =\ nng\_duration.count();}
\DoxyCodeLine{01185\ \ \ \ \ \ \ \ \ \ \ \ \ nng\_time\ +=\ nng\_time\_iter;}
\DoxyCodeLine{01186\ }
\DoxyCodeLine{01187\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ merge\_start\_time\ =\ std::chrono::high\_resolution\_clock::now();}
\DoxyCodeLine{01188\ \ \ \ \ \ \ \ \ \ \ \ \ std::pair<bool,\ int>\ result\ =\ this-\/>cycle\_best\_optimisation(threshold,\ region\_nng);}
\DoxyCodeLine{01189\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ merge\_end\_time\ =\ std::chrono::high\_resolution\_clock::now();}
\DoxyCodeLine{01190\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ merge\_duration\ =\ std::chrono::duration\_cast<std::chrono::milliseconds>(merge\_end\_time\ -\/\ merge\_start\_time);}
\DoxyCodeLine{01191\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{long}\ \textcolor{keywordtype}{long}\ merge\_time\_iter\ =\ merge\_duration.count();}
\DoxyCodeLine{01192\ \ \ \ \ \ \ \ \ \ \ \ \ merge\_time\ +=\ merge\_time\_iter;}
\DoxyCodeLine{01193\ }
\DoxyCodeLine{01194\ \ \ \ \ \ \ \ \ \ \ \ \ stop\ =\ result.first;}
\DoxyCodeLine{01195\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ merge\_num\ =\ result.second;}
\DoxyCodeLine{01196\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ std::cout\ <<\ "{}Merge\ num:\ "{}\ <<\ merge\_num\ <<\ std::endl;}}
\DoxyCodeLine{01197\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ objects\ =\ this-\/>check\_data\_size\_in\_region();}
\DoxyCodeLine{01198\ \ \ \ \ \ \ \ \ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}Obj\ num:\ "{}}\ <<\ GREEN\_TEXT\ <<\ objects\ <<\ RESET\_COLOR\ <<\ \textcolor{stringliteral}{"{}\ Merge\ num:\ "{}}\ <<\ GREEN\_TEXT\ <<\ merge\_num\ <<\ RESET\_COLOR\ <<\ \textcolor{stringliteral}{"{}\ "{}};}
\DoxyCodeLine{01199\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ std::cout\ <<\ "{}Obj\ +\ Merge:\ "{}\ <<\ objects\ +\ merge\_num\ <<\ std::endl;}}
\DoxyCodeLine{01200\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ activate\ edge}}
\DoxyCodeLine{01201\ }
\DoxyCodeLine{01202\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ activate\_start\_time\ =\ std::chrono::high\_resolution\_clock::now();}
\DoxyCodeLine{01203\ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>activate\_edges(State::Suspend,\ \textcolor{stringliteral}{"{}123"{}});}
\DoxyCodeLine{01204\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ activate\_end\_time\ =\ std::chrono::high\_resolution\_clock::now();}
\DoxyCodeLine{01205\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ activate\_duration\ =\ std::chrono::duration\_cast<std::chrono::milliseconds>(activate\_end\_time\ -\/\ activate\_start\_time);}
\DoxyCodeLine{01206\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{long}\ \textcolor{keywordtype}{long}\ activate\_time\_iter\ =\ activate\_duration.count();}
\DoxyCodeLine{01207\ \ \ \ \ \ \ \ \ \ \ \ \ activate\_time\ +=\ activate\_time\_iter;}
\DoxyCodeLine{01208\ }
\DoxyCodeLine{01209\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ update\_start\_time\ =\ std::chrono::high\_resolution\_clock::now();}
\DoxyCodeLine{01210\ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>update\_weights(State::Suspend);}
\DoxyCodeLine{01211\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ update\_end\_time\ =\ std::chrono::high\_resolution\_clock::now();}
\DoxyCodeLine{01212\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ update\_duration\ =\ std::chrono::duration\_cast<std::chrono::milliseconds>(update\_end\_time\ -\/\ update\_start\_time);}
\DoxyCodeLine{01213\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{long}\ \textcolor{keywordtype}{long}\ update\_time\_iter\ =\ update\_duration.count();}
\DoxyCodeLine{01214\ \ \ \ \ \ \ \ \ \ \ \ \ update\_time\ +=\ update\_time\_iter;}
\DoxyCodeLine{01215\ }
\DoxyCodeLine{01216\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ iter\_time\ =\ std::chrono::duration\_cast<std::chrono::milliseconds>(update\_end\_time\ -\/\ nng\_start\_time);}
\DoxyCodeLine{01217\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ seconds\ =\ iter\_time.count()\ /\ 1000;}
\DoxyCodeLine{01218\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (seconds\ ==\ 0)}
\DoxyCodeLine{01219\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ seconds\ =\ 1;}
\DoxyCodeLine{01220\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ merge\_fre\ =\ merge\_num\ /\ seconds;}
\DoxyCodeLine{01221\ \ \ \ \ \ \ \ \ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}NNG\ time:\ "{}}\ <<\ GREEN\_TEXT\ <<\ nng\_time\_iter\ <<\ RESET\_COLOR\ <<\ \textcolor{stringliteral}{"{}ms"{}}}
\DoxyCodeLine{01222\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}\ Merge\ time:\ "{}}\ <<\ GREEN\_TEXT\ <<\ merge\_time\_iter\ <<\ RESET\_COLOR\ <<\ \textcolor{stringliteral}{"{}ms"{}}}
\DoxyCodeLine{01223\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}\ Edge\ time:\ "{}}\ <<\ GREEN\_TEXT\ <<\ activate\_time\_iter\ <<\ RESET\_COLOR\ <<\ \textcolor{stringliteral}{"{}ms"{}}}
\DoxyCodeLine{01224\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}\ Update\ time:\ "{}}\ <<\ GREEN\_TEXT\ <<\ update\_time\_iter\ <<\ RESET\_COLOR\ <<\ \textcolor{stringliteral}{"{}ms"{}}}
\DoxyCodeLine{01225\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}\ Iter\ time:\ "{}}\ <<\ GREEN\_TEXT\ <<\ iter\_time.count()\ <<\ RESET\_COLOR\ <<\ \textcolor{stringliteral}{"{}s"{}}}
\DoxyCodeLine{01226\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}\ Merge\ fre:\ "{}}\ <<\ GREEN\_TEXT\ <<\ merge\_fre\ <<\ RESET\_COLOR\ <<\ \textcolor{stringliteral}{"{}\ thousand\ pairs/s"{}}\ <<\ std::endl;}
\DoxyCodeLine{01227\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{delete}\ region\_nng;}
\DoxyCodeLine{01228\ \ \ \ \ \ \ \ \ \ \ \ \ iter\_num++;}
\DoxyCodeLine{01229\ }
\DoxyCodeLine{01230\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (merge\_num\ <\ 25000)}
\DoxyCodeLine{01231\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01232\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ num\_less\_10000\ +=\ merge\_num;}
\DoxyCodeLine{01233\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ merge\_num\ =\ 0;}
\DoxyCodeLine{01234\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_n_n_g}{NNG}}\ *region\_nng11\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{class_n_n_g}{NNG}}();}
\DoxyCodeLine{01235\ }
\DoxyCodeLine{01236\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>construct\_nng(region\_nng11);}
\DoxyCodeLine{01237\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_edge}{Edge}}\ *minmum\_arc;}
\DoxyCodeLine{01238\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!region\_nng11-\/>empty())}
\DoxyCodeLine{01239\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01240\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ minmum\_arc\ =\ region\_nng11-\/>pop();}
\DoxyCodeLine{01241\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (minmum\_arc-\/>weight\ <\ threshold)}
\DoxyCodeLine{01242\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01243\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>merge\_vertices(minmum\_arc,\ region\_nng11);}
\DoxyCodeLine{01244\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ merge\_num++;}
\DoxyCodeLine{01245\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (region\_nng11-\/>empty())}
\DoxyCodeLine{01246\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01247\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ minmum\_arc\ =\ region\_nng11-\/>pop();}
\DoxyCodeLine{01248\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01249\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}minmum\_arc\ weight:\ "{}}\ <<\ minmum\_arc-\/>weight\ <<\ std::endl;}
\DoxyCodeLine{01250\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01251\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}Merge\ num:\ "{}}\ <<\ merge\_num\ <<\ std::endl;}
\DoxyCodeLine{01252\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stop\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{01253\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{delete}\ region\_nng11;}
\DoxyCodeLine{01254\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01255\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01256\ }
\DoxyCodeLine{01257\ \ \ \ \ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}Total\ NNG\ time:\ "{}}\ <<\ GREEN\_TEXT\ <<\ nng\_time\ /\ 1000\ <<\ RESET\_COLOR\ <<\ \textcolor{stringliteral}{"{}s"{}}\ <<\ std::endl}
\DoxyCodeLine{01258\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}Total\ merge\ time:\ "{}}\ <<\ GREEN\_TEXT\ <<\ merge\_time\ /\ 1000\ <<\ RESET\_COLOR\ <<\ \textcolor{stringliteral}{"{}s"{}}\ <<\ std::endl}
\DoxyCodeLine{01259\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}Total\ edge\ time:\ "{}}\ <<\ GREEN\_TEXT\ <<\ activate\_time\ /\ 1000\ <<\ RESET\_COLOR\ <<\ \textcolor{stringliteral}{"{}s"{}}\ <<\ std::endl}
\DoxyCodeLine{01260\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}Total\ update\ time:\ "{}}\ <<\ GREEN\_TEXT\ <<\ update\_time\ /\ 1000\ <<\ RESET\_COLOR\ <<\ \textcolor{stringliteral}{"{}s"{}}\ <<\ std::endl;}
\DoxyCodeLine{01261\ }
\DoxyCodeLine{01262\ \ \ \ \ \ \ \ \ std::pair<T1\ *,\ int>\ chains\ =\ this-\/>chaining\_vertice();}
\DoxyCodeLine{01263\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ chains.first;}
\DoxyCodeLine{01264\ \ \ \ \ \}}
\DoxyCodeLine{01265\ }
\DoxyCodeLine{01266\ \ \ \ \ T1\ *region\_pruning\_cycle\_optimization(\textcolor{keywordtype}{double}\ threshold,\ \textcolor{keywordtype}{int}\ region\_size)}
\DoxyCodeLine{01267\ \ \ \ \ \{}
\DoxyCodeLine{01268\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ iter\ =\ 2;}
\DoxyCodeLine{01269\ \ \ \ \ \ \ \ \ T1\ *root\ =\ \&this-\/>vertice[0];}
\DoxyCodeLine{01270\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ *scales\ =\ \textcolor{keyword}{new}\ \textcolor{keywordtype}{double}[iter]\{threshold\ *\ 0.1,\ threshold\};}
\DoxyCodeLine{01271\ \ \ \ \ \ \ \ \ std::pair<T1\ *,\ int>\ chains;}
\DoxyCodeLine{01272\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ 2;\ i++)}
\DoxyCodeLine{01273\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01274\ \ \ \ \ \ \ \ \ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}Iter\ "{}}\ <<\ i\ +\ 1\ <<\ \textcolor{stringliteral}{"{}:"{}}\ <<\ std::endl;}
\DoxyCodeLine{01275\ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<std::pair<T1\ *,\ int>>\ results;}
\DoxyCodeLine{01276\ \ \ \ \ \ \ \ \ \ \ \ \ results\ =\ this-\/>partition\_dataset\_by\_kd\_tree(root,\ region\_size);}
\DoxyCodeLine{01277\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ results\ =\ this-\/>partition\_dataset\_by\_kd\_tree(root,\ 400,\ 10);}}
\DoxyCodeLine{01278\ }
\DoxyCodeLine{01279\ \ \ \ \ \ \ \ \ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}Set\ num:\ "{}}\ <<\ results.size()\ <<\ std::endl;}
\DoxyCodeLine{01280\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ suspend\_edge\_num\ =\ this-\/>regionalize(results);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ regionalize\ the\ vertice}}
\DoxyCodeLine{01281\ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>region\_cycle\_best\_optimization(results,\ scales[i],\ \textcolor{keyword}{true});\ \textcolor{comment}{//\ global\ optimisation\ in\ each\ region}}
\DoxyCodeLine{01282\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ std::cout\ <<\ "{}Regionalize\ edge\ num:\ "{}\ <<\ suspend\_edge\_num\ <<\ std::endl;}}
\DoxyCodeLine{01283\ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>activate\_edges(State::Suspend);}
\DoxyCodeLine{01284\ }
\DoxyCodeLine{01285\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ {\ucr}{\ucr}{\ucr}{\ucr}Ҫ{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}ڼ{\ucr}{\ucr}{\ucr}״̬{\ucr}{\ucr}vertex{\ucr}{\ucr}{\ucr}´{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}}}
\DoxyCodeLine{01286\ \ \ \ \ \ \ \ \ \ \ \ \ chains\ =\ this-\/>chaining\_vertice();}
\DoxyCodeLine{01287\ \ \ \ \ \ \ \ \ \ \ \ \ root\ =\ chains.first;}
\DoxyCodeLine{01288\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ num\ =\ chains.second;}
\DoxyCodeLine{01289\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01290\ }
\DoxyCodeLine{01291\ \ \ \ \ \ \ \ \ \textcolor{keyword}{delete}[]\ scales;}
\DoxyCodeLine{01292\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ root;}
\DoxyCodeLine{01293\ \ \ \ \ \}}
\DoxyCodeLine{01294\ }
\DoxyCodeLine{01295\ \ \ \ \ T1\ *region\_pruning\_cycle\_optimization\_MultiCores(\textcolor{keywordtype}{double}\ threshold,\ \textcolor{keywordtype}{int}\ region\_size)}
\DoxyCodeLine{01296\ \ \ \ \ \{}
\DoxyCodeLine{01297\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ iter\ =\ 3;}
\DoxyCodeLine{01298\ \ \ \ \ \ \ \ \ T1\ *root\ =\ \&this-\/>vertice[0];}
\DoxyCodeLine{01299\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ *scales\ =\ \textcolor{keyword}{new}\ \textcolor{keywordtype}{double}[iter]\{threshold\ *\ 0.1,\ threshold\ *\ 0.2,\ threshold\};}
\DoxyCodeLine{01300\ \ \ \ \ \ \ \ \ std::pair<T1\ *,\ int>\ chains;}
\DoxyCodeLine{01301\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{long}\ \textcolor{keywordtype}{long}\ total\_divide\_time\ =\ 0;}
\DoxyCodeLine{01302\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ iter;\ i++)}
\DoxyCodeLine{01303\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01304\ \ \ \ \ \ \ \ \ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}Iter\ "{}}\ <<\ GREEN\_TEXT\ <<\ i\ +\ 1\ <<\ RESET\_COLOR\ <<\ \textcolor{stringliteral}{"{}:"{}}\ <<\ std::endl;}
\DoxyCodeLine{01305\ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<std::pair<T1\ *,\ int>>\ results;}
\DoxyCodeLine{01306\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ results\ =\ this-\/>partition\_dataset\_by\_kd\_tree(root,\ 250000);}}
\DoxyCodeLine{01307\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ auto\ start\_time\ =\ std::chrono::high\_resolution\_clock::now();}}
\DoxyCodeLine{01308\ \ \ \ \ \ \ \ \ \ \ \ \ results\ =\ this-\/>partition\_dataset\_by\_kd\_tree(root,\ region\_size);}
\DoxyCodeLine{01309\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ auto\ end\_time\ =\ std::chrono::high\_resolution\_clock::now();}}
\DoxyCodeLine{01310\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ auto\ duration\ =\ std::chrono::duration\_cast<std::chrono::milliseconds>(end\_time\ -\/\ start\_time);}}
\DoxyCodeLine{01311\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ long\ long\ t\ =\ duration.count();}}
\DoxyCodeLine{01312\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ total\_divide\_time\ +=\ t;}}
\DoxyCodeLine{01313\ \ \ \ \ \ \ \ \ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}Set\ num:\ "{}}\ <<\ GREEN\_TEXT\ <<\ results.size()\ <<\ RESET\_COLOR\ <<\ std::endl;}
\DoxyCodeLine{01314\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ count\ =\ 0;}
\DoxyCodeLine{01315\ \ \ \ \ \ \ \ \ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}Set\ tables:\ "{}}\ <<\ std::endl}
\DoxyCodeLine{01316\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}\(\backslash\)t"{}}\ <<\ GREEN\_TEXT;}
\DoxyCodeLine{01317\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ GREEN\_TEXT\ <<\ idx\ <<\ RESET\_COLOR}}
\DoxyCodeLine{01318\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ \&pair\ :\ results)}
\DoxyCodeLine{01319\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01320\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ T1\ *vertex\ =\ pair.first;}
\DoxyCodeLine{01321\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ value\ =\ pair.second;}
\DoxyCodeLine{01322\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::cout\ <<\ value\ <<\ \textcolor{stringliteral}{"{}\ "{}};}
\DoxyCodeLine{01323\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((count\ +\ 1)\ \%\ 5\ ==\ 0)}
\DoxyCodeLine{01324\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01325\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::cout\ <<\ std::endl}
\DoxyCodeLine{01326\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}\(\backslash\)t"{}};}
\DoxyCodeLine{01327\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01328\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ count++;}
\DoxyCodeLine{01329\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01330\ \ \ \ \ \ \ \ \ \ \ \ \ std::cout\ <<\ std::endl}
\DoxyCodeLine{01331\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <<\ RESET\_COLOR;}
\DoxyCodeLine{01332\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ suspend\_edge\_num\ =\ this-\/>regionalize(results);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ regionalize\ the\ vertice}}
\DoxyCodeLine{01333\ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>region\_cycle\_best\_parallel\_optimization(results,\ scales[i],\ \textcolor{keyword}{true});\ \textcolor{comment}{//\ global\ optimisation\ in\ each\ region}}
\DoxyCodeLine{01334\ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>activate\_edges(State::Suspend);}
\DoxyCodeLine{01335\ }
\DoxyCodeLine{01336\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ {\ucr}{\ucr}{\ucr}{\ucr}Ҫ{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}ڼ{\ucr}{\ucr}{\ucr}״̬{\ucr}{\ucr}vertex{\ucr}{\ucr}{\ucr}´{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}}}
\DoxyCodeLine{01337\ \ \ \ \ \ \ \ \ \ \ \ \ chains\ =\ this-\/>chaining\_vertice();}
\DoxyCodeLine{01338\ \ \ \ \ \ \ \ \ \ \ \ \ root\ =\ chains.first;}
\DoxyCodeLine{01339\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ num\ =\ chains.second;}
\DoxyCodeLine{01340\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01341\ }
\DoxyCodeLine{01342\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ std::cout\ <<\ "{}Return\ root"{}\ <<\ std::endl;}}
\DoxyCodeLine{01343\ \ \ \ \ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}out\ num:\ "{}}\ <<\ this-\/>check\_data\_size\_in\_region((\mbox{\hyperlink{class_vertex}{Vertex}}\ *)root)\ <<\ std::endl;}
\DoxyCodeLine{01344\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ std::cout\ <<\ "{}Divide\ time:\ "{}\ <<\ total\_divide\_time\ <<\ std::endl;}}
\DoxyCodeLine{01345\ }
\DoxyCodeLine{01346\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ root;}
\DoxyCodeLine{01347\ \ \ \ \ \}}
\DoxyCodeLine{01348\ }
\DoxyCodeLine{01349\ \ \ \ \ \mbox{\hyperlink{class_vertex}{Vertex}}\ *update\_root\_in\_region(\mbox{\hyperlink{class_vertex}{Vertex}}\ *org\_root)}
\DoxyCodeLine{01350\ \ \ \ \ \{}
\DoxyCodeLine{01351\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_vertex}{Vertex}}\ *new\_root\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{01352\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_vertex}{Vertex}}\ *nil\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{01353\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (org\_root\ !=\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{01354\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01355\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (org\_root-\/>state\ !=\ State::Freeze\ \&\&\ new\_root\ ==\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{01356\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01357\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ new\_root\ =\ org\_root;}
\DoxyCodeLine{01358\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ nil\ =\ new\_root;}
\DoxyCodeLine{01359\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ org\_root\ =\ org\_root-\/>next\_in\_region;}
\DoxyCodeLine{01360\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01361\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01362\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (org\_root-\/>state\ !=\ State::Freeze)}
\DoxyCodeLine{01363\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01364\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ nil-\/>next\_in\_region\ =\ org\_root;}
\DoxyCodeLine{01365\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ nil\ =\ org\_root;}
\DoxyCodeLine{01366\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01367\ \ \ \ \ \ \ \ \ \ \ \ \ org\_root\ =\ org\_root-\/>next\_in\_region;}
\DoxyCodeLine{01368\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01369\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (nil\ !=\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{01370\ \ \ \ \ \ \ \ \ \ \ \ \ nil-\/>next\_in\_region\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{01371\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ new\_root;}
\DoxyCodeLine{01372\ \ \ \ \ \}}
\DoxyCodeLine{01373\ }
\DoxyCodeLine{01374\ \ \ \ \ std::pair<bool,\ int>\ cycle\_best\_optimisation(\textcolor{keywordtype}{double}\ threshold,\ \mbox{\hyperlink{class_n_n_g}{NNG}}\ *region\_nng)}
\DoxyCodeLine{01375\ \ \ \ \ \{}
\DoxyCodeLine{01376\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ num\ =\ 0;}
\DoxyCodeLine{01377\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ std::cout\ <<\ "{}cycle\_best\_optimisation\ is\ running"{}\ <<\ std::endl;}}
\DoxyCodeLine{01378\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!region\_nng-\/>empty())}
\DoxyCodeLine{01379\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01380\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_edge}{Edge}}\ *minimum\_edge\ =\ region\_nng-\/>pop();}
\DoxyCodeLine{01381\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (minimum\_edge-\/>weight\ >=\ threshold)}
\DoxyCodeLine{01382\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01383\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ std::make\_pair(\textcolor{keyword}{true},\ num);}
\DoxyCodeLine{01384\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01385\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{01386\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01387\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (minimum\_edge-\/>weight\ <\ threshold)}
\DoxyCodeLine{01388\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01389\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>simply\_merge\_vertices(minimum\_edge);}
\DoxyCodeLine{01390\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ num++;}
\DoxyCodeLine{01391\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (region\_nng-\/>empty())}
\DoxyCodeLine{01392\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01393\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ minimum\_edge\ =\ region\_nng-\/>pop();}
\DoxyCodeLine{01394\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01395\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ std::make\_pair(\textcolor{keyword}{false},\ num);}
\DoxyCodeLine{01396\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01397\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01398\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ std::make\_pair(\textcolor{keyword}{true},\ num);}
\DoxyCodeLine{01399\ \ \ \ \ \}}
\DoxyCodeLine{01400\ }
\DoxyCodeLine{01401\ \ \ \ \ \textcolor{comment}{//\ kd-\/tree\ for\ partitioning\ the\ dataset}}
\DoxyCodeLine{01402\ \ \ \ \ std::vector<std::pair<T1\ *,\ int>>\ partition\_dataset\_by\_kd\_tree(T1\ *root,\ \textcolor{keywordtype}{int}\ partition\_minmum\_num)}
\DoxyCodeLine{01403\ \ \ \ \ \{}
\DoxyCodeLine{01404\ \ \ \ \ \ \ \ \ std::vector<std::pair<T1\ *,\ int>>\ results;}
\DoxyCodeLine{01405\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (root\ ==\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{01406\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ results;}
\DoxyCodeLine{01407\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ int\ position\_dimension\ =\ root-\/>position\_dimension;}}
\DoxyCodeLine{01408\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ pos\_dimension\ =\ root-\/>position\_dimension;}
\DoxyCodeLine{01409\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ current\_partition\_size\ =\ 0;\ \textcolor{comment}{//\ =\ this-\/>vertice\_num;}}
\DoxyCodeLine{01410\ \ \ \ \ \ \ \ \ T1\ *nil\ =\ root;}
\DoxyCodeLine{01411\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (nil\ !=\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{01412\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01413\ \ \ \ \ \ \ \ \ \ \ \ \ current\_partition\_size++;}
\DoxyCodeLine{01414\ \ \ \ \ \ \ \ \ \ \ \ \ nil\ =\ (T1\ *)nil-\/>next\_in\_region;}
\DoxyCodeLine{01415\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01416\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_cluster}{Cluster}}\ *root\_cluster\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{class_cluster}{Cluster}}((\mbox{\hyperlink{class_vertex}{Vertex}}\ *)root,\ partition\_minmum\_num,\ pos\_dimension,\ current\_partition\_size);}
\DoxyCodeLine{01417\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ size\ =\ this-\/>iter\_divide\_dataset(root\_cluster,\ partition\_minmum\_num,\ \&results);}
\DoxyCodeLine{01418\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ std::cout\ <<\ "{}Total\ size:\ "{}\ <<\ size\ <<\ std::endl;}}
\DoxyCodeLine{01419\ \ \ \ \ \ \ \ \ \textcolor{keyword}{delete}\ root\_cluster;}
\DoxyCodeLine{01420\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ results;}
\DoxyCodeLine{01421\ \ \ \ \ \}}
\DoxyCodeLine{01422\ }
\DoxyCodeLine{01423\ \ \ \ \ \textcolor{keywordtype}{int}\ iter\_divide\_dataset(\mbox{\hyperlink{class_cluster}{Cluster}}\ *root\_cluster,\ \textcolor{keywordtype}{int}\ partition\_minmum\_num,\ std::vector<std::pair<T1\ *,\ int>>\ *divide\_result)}
\DoxyCodeLine{01424\ \ \ \ \ \{}
\DoxyCodeLine{01425\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (root\_cluster-\/>dataset\_size\ <\ partition\_minmum\_num)}
\DoxyCodeLine{01426\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01427\ \ \ \ \ \ \ \ \ \ \ \ \ divide\_result-\/>push\_back(std::make\_pair((T1\ *)root\_cluster-\/>root\_vertex,\ root\_cluster-\/>dataset\_size));}
\DoxyCodeLine{01428\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ root\_cluster-\/>dataset\_size;}
\DoxyCodeLine{01429\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01430\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ std::pair<Cluster*,\ Cluster*>\ child\_clusters\ =\ root\_cluster-\/>divide\_cluster\_parallel();\ //root\_cluster-\/>divide\_cluster();}}
\DoxyCodeLine{01431\ \ \ \ \ \ \ \ \ std::pair<Cluster\ *,\ Cluster\ *>\ child\_clusters\ =\ root\_cluster-\/>divide\_cluster();}
\DoxyCodeLine{01432\ }
\DoxyCodeLine{01433\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ left\_size\ =\ iter\_divide\_dataset(child\_clusters.first,\ partition\_minmum\_num,\ divide\_result);}
\DoxyCodeLine{01434\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ right\_size\ =\ iter\_divide\_dataset(child\_clusters.second,\ partition\_minmum\_num,\ divide\_result);}
\DoxyCodeLine{01435\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ left\_size\ +\ right\_size;}
\DoxyCodeLine{01436\ \ \ \ \ \}}
\DoxyCodeLine{01437\ }
\DoxyCodeLine{01438\ \ \ \ \ \textcolor{keywordtype}{void}\ check\_direct(\mbox{\hyperlink{class_vertex}{Vertex}}\ *root)}
\DoxyCodeLine{01439\ \ \ \ \ \{}
\DoxyCodeLine{01440\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_vertex}{Vertex}}\ *v\ =\ root;}
\DoxyCodeLine{01441\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (v\ !=\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{01442\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01443\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (v-\/>direct\ ==\ \textcolor{keyword}{nullptr}\ \&\&\ v-\/>edges.size()\ !=\ 0)}
\DoxyCodeLine{01444\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ std::runtime\_error(\textcolor{stringliteral}{"{}Error:\ none\ direct\ vertex\ existed!"{}});}
\DoxyCodeLine{01445\ \ \ \ \ \ \ \ \ \ \ \ \ ;}
\DoxyCodeLine{01446\ \ \ \ \ \ \ \ \ \ \ \ \ v\ =\ v-\/>next\_in\_region;}
\DoxyCodeLine{01447\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01448\ \ \ \ \ \}}
\DoxyCodeLine{01449\ }
\DoxyCodeLine{01450\ \ \ \ \ \textcolor{keywordtype}{int}\ check\_data\_size\_in\_region()}
\DoxyCodeLine{01451\ \ \ \ \ \{}
\DoxyCodeLine{01452\ }
\DoxyCodeLine{01453\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ num\ =\ 0;}
\DoxyCodeLine{01454\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ this-\/>vertice\_num;\ i++)}
\DoxyCodeLine{01455\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01456\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_vertex}{Vertex}}\ *v\ =\ \&this-\/>vertice[i];}
\DoxyCodeLine{01457\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_vertex}{Vertex}}\ *nil\ =\ v;}
\DoxyCodeLine{01458\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (v-\/>state\ !=\ State::Freeze\ \&\&\ v-\/>is\_visited\ ==\ \textcolor{keyword}{false})}
\DoxyCodeLine{01459\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01460\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ while\ (nil\ !=\ nullptr)}}
\DoxyCodeLine{01461\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\{}}
\DoxyCodeLine{01462\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ nil-\/>is\_visited\ =\ true;}}
\DoxyCodeLine{01463\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ num\ +=\ nil-\/>size;}}
\DoxyCodeLine{01464\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ nil\ =\ nil-\/>next\_in\_region;}}
\DoxyCodeLine{01465\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \}}}
\DoxyCodeLine{01466\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ num++;}
\DoxyCodeLine{01467\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01468\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01469\ }
\DoxyCodeLine{01470\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ this-\/>vertice\_num;\ i++)}
\DoxyCodeLine{01471\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01472\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_vertex}{Vertex}}\ *v\ =\ \&this-\/>vertice[i];}
\DoxyCodeLine{01473\ \ \ \ \ \ \ \ \ \ \ \ \ v-\/>is\_visited\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{01474\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01475\ }
\DoxyCodeLine{01476\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ num;}
\DoxyCodeLine{01477\ \ \ \ \ \}}
\DoxyCodeLine{01478\ }
\DoxyCodeLine{01479\ \ \ \ \ \textcolor{keywordtype}{int}\ check\_data\_size\_in\_region(\mbox{\hyperlink{class_vertex}{Vertex}}\ *root)}
\DoxyCodeLine{01480\ \ \ \ \ \{}
\DoxyCodeLine{01481\ }
\DoxyCodeLine{01482\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ num\ =\ 0;}
\DoxyCodeLine{01483\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (root\ !=\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{01484\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01485\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_vertex}{Vertex}}\ *v\ =\ root;}
\DoxyCodeLine{01486\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_vertex}{Vertex}}\ *nil\ =\ v;}
\DoxyCodeLine{01487\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (v-\/>state\ !=\ State::Freeze\ \&\&\ v-\/>is\_visited\ ==\ \textcolor{keyword}{false})}
\DoxyCodeLine{01488\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01489\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ num++;}
\DoxyCodeLine{01490\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01491\ \ \ \ \ \ \ \ \ \ \ \ \ root\ =\ root-\/>next\_in\_region;}
\DoxyCodeLine{01492\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01493\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (root\ !=\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{01494\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01495\ \ \ \ \ \ \ \ \ \ \ \ \ root-\/>is\_visited\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{01496\ \ \ \ \ \ \ \ \ \ \ \ \ root\ =\ root-\/>next\_in\_region;}
\DoxyCodeLine{01497\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01498\ }
\DoxyCodeLine{01499\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ num;}
\DoxyCodeLine{01500\ \ \ \ \ \}}
\DoxyCodeLine{01501\ }
\DoxyCodeLine{01502\ \ \ \ \ \textcolor{keywordtype}{int}\ check\_data\_size\_in\_output()}
\DoxyCodeLine{01503\ \ \ \ \ \{}
\DoxyCodeLine{01504\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ num\ =\ 0;}
\DoxyCodeLine{01505\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ this-\/>vertice\_num;\ i++)}
\DoxyCodeLine{01506\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01507\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_vertex}{Vertex}}\ *v\ =\ \&this-\/>vertice[i];}
\DoxyCodeLine{01508\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (v-\/>state\ !=\ State::Freeze)}
\DoxyCodeLine{01509\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01510\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ v-\/>is\_visited\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{01511\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ num\ +=\ v-\/>size;}
\DoxyCodeLine{01512\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_vertex}{Vertex}}\ *nt\ =\ v-\/>next;}
\DoxyCodeLine{01513\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ ttt\ =\ 0;}
\DoxyCodeLine{01514\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_vertex}{Vertex}}\ *pre\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{01515\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (nt\ !=\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{01516\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01517\ }
\DoxyCodeLine{01518\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (nt-\/>is\_visited\ ==\ \textcolor{keyword}{true})}
\DoxyCodeLine{01519\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01520\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ttt++;}
\DoxyCodeLine{01521\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01522\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (nt-\/>ID\ ==\ 193591)}
\DoxyCodeLine{01523\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01524\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pre;}
\DoxyCodeLine{01525\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ttt++;}
\DoxyCodeLine{01526\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01527\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ttt++;}
\DoxyCodeLine{01528\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ nt-\/>is\_visited\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{01529\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pre\ =\ nt;}
\DoxyCodeLine{01530\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ nt\ =\ nt-\/>next;}
\DoxyCodeLine{01531\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01532\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01533\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01534\ }
\DoxyCodeLine{01535\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ this-\/>vertice\_num;\ i++)}
\DoxyCodeLine{01536\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01537\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_vertex}{Vertex}}\ *v\ =\ \&this-\/>vertice[i];}
\DoxyCodeLine{01538\ \ \ \ \ \ \ \ \ \ \ \ \ v-\/>is\_visited\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{01539\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01540\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ num;}
\DoxyCodeLine{01541\ \ \ \ \ \}}
\DoxyCodeLine{01542\ }
\DoxyCodeLine{01543\ \ \ \ \ std::pair<T1\ *,\ int>\ chaining\_vertice()}
\DoxyCodeLine{01544\ \ \ \ \ \{}
\DoxyCodeLine{01545\ \ \ \ \ \ \ \ \ T1\ *root\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{01546\ \ \ \ \ \ \ \ \ T1\ *nil\ =\ root;}
\DoxyCodeLine{01547\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ num\ =\ 0;}
\DoxyCodeLine{01548\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ this-\/>vertice\_num;\ i++)}
\DoxyCodeLine{01549\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01550\ \ \ \ \ \ \ \ \ \ \ \ \ T1\ *v\ =\ \&this-\/>vertice[i];}
\DoxyCodeLine{01551\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (v-\/>state\ !=\ State::Freeze)}
\DoxyCodeLine{01552\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01553\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (v-\/>parent\ !=\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{01554\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01555\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}wrong"{}}\ <<\ std::endl;}
\DoxyCodeLine{01556\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01557\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (root\ ==\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{01558\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01559\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ root\ =\ v;}
\DoxyCodeLine{01560\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ nil\ =\ root;}
\DoxyCodeLine{01561\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01562\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{01563\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01564\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ nil-\/>next\_in\_region\ =\ v;}
\DoxyCodeLine{01565\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ nil\ =\ v;}
\DoxyCodeLine{01566\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01567\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ nil-\/>next\_in\_region\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{01568\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ v-\/>bits\_num\ =\ 0;}
\DoxyCodeLine{01569\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ v-\/>bit\_sign\ =\ 0;}
\DoxyCodeLine{01570\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ v-\/>direct\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{01571\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ v-\/>is\_visited\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{01572\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ v-\/>state\ =\ State::Activate;}
\DoxyCodeLine{01573\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ num\ +=\ v-\/>size;}
\DoxyCodeLine{01574\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01575\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01576\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ std::make\_pair(root,\ num);}
\DoxyCodeLine{01577\ \ \ \ \ \}}
\DoxyCodeLine{01578\ }
\DoxyCodeLine{01579\ \ \ \ \ std::vector<Vertex\ *>\ partition\_dataset\_by\_BFS(\textcolor{keywordtype}{int}\ partition\_minmum\_num,\ \textcolor{keywordtype}{int}\ sign)}
\DoxyCodeLine{01580\ \ \ \ \ \{}
\DoxyCodeLine{01581\ \ \ \ \ \ \ \ \ std::vector<Vertex\ *>\ roots;}
\DoxyCodeLine{01582\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (this-\/>vertice\ ==\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{01583\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ roots;}
\DoxyCodeLine{01584\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ total\_num\ =\ 0;}
\DoxyCodeLine{01585\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ bit\_sign\ =\ sign;}
\DoxyCodeLine{01586\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ this-\/>vertice\_num;\ i++)}
\DoxyCodeLine{01587\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01588\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_vertex}{Vertex}}\ *v\ =\ \&this-\/>vertice[i];}
\DoxyCodeLine{01589\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (v-\/>parent\ !=\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{01590\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01591\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ v\ =\ v-\/>parent;}
\DoxyCodeLine{01592\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01593\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (bit\_sign\ ==\ v-\/>bit\_sign)}
\DoxyCodeLine{01594\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01595\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ num\ =\ this-\/>broad\_fist\_search(v,\ partition\_minmum\_num);}
\DoxyCodeLine{01596\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ total\_num\ +=\ num;}
\DoxyCodeLine{01597\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ roots.push\_back(v);}
\DoxyCodeLine{01598\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01599\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01600\ \ \ \ \ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}Vertice\ num:\ "{}}\ <<\ total\_num\ <<\ std::endl;}
\DoxyCodeLine{01601\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ roots;}
\DoxyCodeLine{01602\ \ \ \ \ \}}
\DoxyCodeLine{01603\ }
\DoxyCodeLine{01604\ \ \ \ \ \textcolor{keywordtype}{int}\ broad\_fist\_search(\mbox{\hyperlink{class_vertex}{Vertex}}\ *root,\ \textcolor{keywordtype}{int}\ limit\_num)}
\DoxyCodeLine{01605\ \ \ \ \ \{}
\DoxyCodeLine{01606\ \ \ \ \ \ \ \ \ std::queue<Vertex\ *>\ queue;}
\DoxyCodeLine{01607\ \ \ \ \ \ \ \ \ queue.push(root);}
\DoxyCodeLine{01608\ \ \ \ \ \ \ \ \ root-\/>is\_visited\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{01609\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ search\_num\ =\ 0;}
\DoxyCodeLine{01610\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ bit\_sign\ =\ root-\/>bit\_sign\ +\ 1;}
\DoxyCodeLine{01611\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_vertex}{Vertex}}\ *ptr\_next\ =\ root;}
\DoxyCodeLine{01612\ \ \ \ \ \ \ \ \ root-\/>next\_in\_region\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{01613\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (queue.size()\ >\ 0)}
\DoxyCodeLine{01614\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01615\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_vertex}{Vertex}}\ *v\ =\ queue.front();}
\DoxyCodeLine{01616\ \ \ \ \ \ \ \ \ \ \ \ \ queue.pop();}
\DoxyCodeLine{01617\ }
\DoxyCodeLine{01618\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (v\ !=\ root)}
\DoxyCodeLine{01619\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01620\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ptr\_next-\/>next\_in\_region\ =\ v;}
\DoxyCodeLine{01621\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ptr\_next\ =\ v;}
\DoxyCodeLine{01622\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ v-\/>next\_in\_region\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{01623\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01624\ \ \ \ \ \ \ \ \ \ \ \ \ v-\/>append\_sign(\textcolor{keyword}{true});}
\DoxyCodeLine{01625\ \ \ \ \ \ \ \ \ \ \ \ \ search\_num++;}
\DoxyCodeLine{01626\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (search\_num\ >=\ limit\_num)}
\DoxyCodeLine{01627\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01628\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ v-\/>edges.size();\ i++)}
\DoxyCodeLine{01629\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01630\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ e\_id\ =\ v-\/>edges[i];}
\DoxyCodeLine{01631\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_edge}{Edge}}\ *e\ =\ \&this-\/>edges[e\_id];}
\DoxyCodeLine{01632\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_vertex}{Vertex}}\ *v\_adj\ =\ e-\/>get\_other\_vertex(v);}
\DoxyCodeLine{01633\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (v\_adj-\/>bit\_sign\ !=\ bit\_sign\ \&\&\ v\_adj-\/>is\_visited\ ==\ \textcolor{keyword}{false})}
\DoxyCodeLine{01634\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01635\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ v\_adj-\/>append\_sign(true);}}
\DoxyCodeLine{01636\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ queue.push(v\_adj);}
\DoxyCodeLine{01637\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ v\_adj-\/>is\_visited\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{01638\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01639\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01640\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01641\ }
\DoxyCodeLine{01642\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ search\_num;}
\DoxyCodeLine{01643\ \ \ \ \ \}}
\DoxyCodeLine{01644\ }
\DoxyCodeLine{01645\ \ \ \ \ \textcolor{keywordtype}{void}\ check\_ouput\_num()}
\DoxyCodeLine{01646\ \ \ \ \ \{}
\DoxyCodeLine{01647\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ ouput\_num\ =\ 0;}
\DoxyCodeLine{01648\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (this-\/>vertice\ !=\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{01649\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01650\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ std::cout\ <<\ "{}Ouput\ vertice:\ "{};}}
\DoxyCodeLine{01651\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ this-\/>vertice\_num;\ i++)}
\DoxyCodeLine{01652\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01653\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_vertex}{Vertex}}\ *v\ =\ \&this-\/>vertice[i];}
\DoxyCodeLine{01654\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (v-\/>parent\ ==\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{01655\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01656\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ouput\_num++;}
\DoxyCodeLine{01657\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ std::cout\ <<\ v-\/>ID\ <<\ "{}\ "{};}}
\DoxyCodeLine{01658\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01659\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01660\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01661\ \ \ \ \ \ \ \ \ std::cout\ <<\ std::endl}
\DoxyCodeLine{01662\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}Check:\ Num\ of\ Ouputs:\ "{}}\ <<\ GREEN\_TEXT\ <<\ ouput\_num\ <<\ RESET\_COLOR\ <<\ std::endl;}
\DoxyCodeLine{01663\ \ \ \ \ \}}
\DoxyCodeLine{01664\ }
\DoxyCodeLine{01665\ \ \ \ \ \textcolor{keywordtype}{void}\ suspend\_edges(\textcolor{keywordtype}{double}\ threshold)}
\DoxyCodeLine{01666\ \ \ \ \ \{}
\DoxyCodeLine{01667\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ suspend\ =\ 0;}
\DoxyCodeLine{01668\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (this-\/>edges\ !=\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{01669\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01670\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ this-\/>edge\_num;\ i++)}
\DoxyCodeLine{01671\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01672\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ T2\ *e\_ptr\ =\ \&this-\/>edges[i];}
\DoxyCodeLine{01673\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (e\_ptr-\/>weight\ >\ threshold\ \&\&\ e\_ptr-\/>state\ ==\ State::Activate)}
\DoxyCodeLine{01674\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01675\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ suspend++;}
\DoxyCodeLine{01676\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>suspend\_edge(e\_ptr);}
\DoxyCodeLine{01677\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01678\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01679\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01680\ \ \ \ \ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}Number\ of\ suspend\ edges:\ "{}}\ <<\ GREEN\_TEXT\ <<\ suspend\ <<\ RESET\_COLOR\ <<\ std::endl;}
\DoxyCodeLine{01681\ \ \ \ \ \}}
\DoxyCodeLine{01682\ }
\DoxyCodeLine{01683\ \ \ \ \ \textcolor{keywordtype}{void}\ suspend\_edge(\mbox{\hyperlink{class_edge}{Edge}}\ *e\_ptr)}
\DoxyCodeLine{01684\ \ \ \ \ \{}
\DoxyCodeLine{01685\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_vertex}{Vertex}}\ *left\_vertex\ =\ e\_ptr-\/>left\_vertex;}
\DoxyCodeLine{01686\ \ \ \ \ \ \ \ \ left\_vertex-\/>remove\_edge(e\_ptr-\/>ID);}
\DoxyCodeLine{01687\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_vertex}{Vertex}}\ *right\_vertex\ =\ e\_ptr-\/>right\_vertex;}
\DoxyCodeLine{01688\ \ \ \ \ \ \ \ \ right\_vertex-\/>remove\_edge(e\_ptr-\/>ID);}
\DoxyCodeLine{01689\ \ \ \ \ \ \ \ \ e\_ptr-\/>state\ =\ State::Suspend;}
\DoxyCodeLine{01690\ \ \ \ \ \}}
\DoxyCodeLine{01691\ }
\DoxyCodeLine{01692\ \ \ \ \ \textcolor{keywordtype}{void}\ freeze\_edges(\textcolor{keywordtype}{double}\ threshold)}
\DoxyCodeLine{01693\ \ \ \ \ \{}
\DoxyCodeLine{01694\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ freeze\ =\ 0;}
\DoxyCodeLine{01695\ }
\DoxyCodeLine{01696\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (this-\/>edges\ !=\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{01697\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01698\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ this-\/>edge\_num;\ i++)}
\DoxyCodeLine{01699\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01700\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ T2\ *e\_ptr\ =\ \&this-\/>edges[i];}
\DoxyCodeLine{01701\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (e\_ptr-\/>state\ ==\ State::Activate\ \&\&\ e\_ptr-\/>weight\ >=\ threshold)}
\DoxyCodeLine{01702\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01703\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ freeze++;}
\DoxyCodeLine{01704\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>freeze\_edge(e\_ptr);}
\DoxyCodeLine{01705\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01706\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01707\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01708\ \ \ \ \ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}Number\ of\ freeze\ edges:\ "{}}\ <<\ GREEN\_TEXT\ <<\ freeze\ <<\ RESET\_COLOR\ <<\ std::endl;}
\DoxyCodeLine{01709\ \ \ \ \ \}}
\DoxyCodeLine{01710\ }
\DoxyCodeLine{01711\ \ \ \ \ \textcolor{keywordtype}{void}\ freeze\_edge(\mbox{\hyperlink{class_edge}{Edge}}\ *e\_ptr)}
\DoxyCodeLine{01712\ \ \ \ \ \{}
\DoxyCodeLine{01713\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_vertex}{Vertex}}\ *left\_vertex\ =\ e\_ptr-\/>left\_vertex;}
\DoxyCodeLine{01714\ \ \ \ \ \ \ \ \ left\_vertex-\/>remove\_edge(e\_ptr-\/>ID);}
\DoxyCodeLine{01715\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_vertex}{Vertex}}\ *right\_vertex\ =\ e\_ptr-\/>right\_vertex;}
\DoxyCodeLine{01716\ \ \ \ \ \ \ \ \ right\_vertex-\/>remove\_edge(e\_ptr-\/>ID);}
\DoxyCodeLine{01717\ \ \ \ \ \ \ \ \ e\_ptr-\/>state\ =\ State::Freeze;}
\DoxyCodeLine{01718\ \ \ \ \ \}}
\DoxyCodeLine{01719\ }
\DoxyCodeLine{01720\ \ \ \ \ \textcolor{keywordtype}{void}\ update\_weight\_in\_region(\mbox{\hyperlink{class_edge}{Edge}}\ *root,\ State\ state)}
\DoxyCodeLine{01721\ \ \ \ \ \{}
\DoxyCodeLine{01722\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (root\ !=\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{01723\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01724\ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>update\_edge\_weight(root,\ state);}
\DoxyCodeLine{01725\ \ \ \ \ \ \ \ \ \ \ \ \ root\ =\ root-\/>next\_edge\_in\_region;}
\DoxyCodeLine{01726\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01727\ \ \ \ \ \}}
\DoxyCodeLine{01728\ }
\DoxyCodeLine{01729\ \ \ \ \ \textcolor{keywordtype}{void}\ update\_weights(State\ state)}
\DoxyCodeLine{01730\ \ \ \ \ \{}
\DoxyCodeLine{01731\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (this-\/>edges\ ==\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{01732\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01733\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ multiThreadProcessing();}}
\DoxyCodeLine{01734\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ this-\/>edge\_num;\ i++)}
\DoxyCodeLine{01735\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01736\ \ \ \ \ \ \ \ \ \ \ \ \ T2\ *e\_ptr\ =\ \&this-\/>edges[i];}
\DoxyCodeLine{01737\ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>update\_edge\_weight(e\_ptr,\ state);}
\DoxyCodeLine{01738\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01739\ \ \ \ \ \}}
\DoxyCodeLine{01740\ }
\DoxyCodeLine{01741\ \ \ \ \ \textcolor{keywordtype}{void}\ update\_edge\_weight(\mbox{\hyperlink{class_edge}{Edge}}\ *e\_ptr,\ State\ state)}
\DoxyCodeLine{01742\ \ \ \ \ \{}
\DoxyCodeLine{01743\ \ \ \ \ \ \ \ \ e\_ptr-\/>is\_checked\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{01744\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (e\_ptr-\/>state\ ==\ state)}
\DoxyCodeLine{01745\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01746\ \ \ \ \ \ \ \ \ \ \ \ \ e\_ptr-\/>weight\ =\ this-\/>merging\_criteria(}
\DoxyCodeLine{01747\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (T\_Feature\ *)e\_ptr-\/>left\_vertex-\/>ptr\_features,}
\DoxyCodeLine{01748\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (T\_Feature\ *)e\_ptr-\/>right\_vertex-\/>ptr\_features,}
\DoxyCodeLine{01749\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (T2\ *)e\_ptr);}
\DoxyCodeLine{01750\ \ \ \ \ \ \ \ \ \ \ \ \ e\_ptr-\/>state\ =\ State::Activate;}
\DoxyCodeLine{01751\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01752\ \ \ \ \ \}}
\DoxyCodeLine{01753\ }
\DoxyCodeLine{01754\ \ \ \ \ \textcolor{keywordtype}{void}\ multi\_thread\_update\_weights(State\ state)}
\DoxyCodeLine{01755\ \ \ \ \ \{}
\DoxyCodeLine{01756\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ {\ucr}߳{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}Ը{\ucr}{\ucr}{\ucr}ʵ{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}}}
\DoxyCodeLine{01757\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ num\_threads\ =\ std::thread::hardware\_concurrency();}
\DoxyCodeLine{01758\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ {\ucr}{\ucr}{\ucr}{\ucr}{\ucr}񻮷ֳɶ{\ucr}{\ucr}{\ucr}{\ucr}}}
\DoxyCodeLine{01759\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ chunk\_size\ =\ this-\/>edge\_num\ /\ num\_threads;}
\DoxyCodeLine{01760\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (this-\/>edge\_num\ \%\ num\_threads\ !=\ 0)}
\DoxyCodeLine{01761\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01762\ \ \ \ \ \ \ \ \ \ \ \ \ chunk\_size++;}
\DoxyCodeLine{01763\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01764\ }
\DoxyCodeLine{01765\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ {\ucr}{\ucr}{\ucr}{\ucr}{\ucr}̳߳{\ucr}}}
\DoxyCodeLine{01766\ \ \ \ \ \ \ \ \ std::vector<std::future<void>>\ futures;}
\DoxyCodeLine{01767\ }
\DoxyCodeLine{01768\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ {\ucr}{\ucr}{\ucr}{\ucr}{\ucr}߳{\ucr}}}
\DoxyCodeLine{01769\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ num\_threads;\ i++)}
\DoxyCodeLine{01770\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01771\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ start\ =\ i\ *\ chunk\_size;}
\DoxyCodeLine{01772\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ end\ =\ std::min(start\ +\ chunk\_size,\ edge\_num);}
\DoxyCodeLine{01773\ \ \ \ \ \ \ \ \ \ \ \ \ futures.push\_back(std::async(std::launch::async,}
\DoxyCodeLine{01774\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{keyword}{this},\ start,\ end,\ state]()}
\DoxyCodeLine{01775\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01776\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ j\ =\ start;\ j\ <\ end;\ j++)}
\DoxyCodeLine{01777\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01778\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>update\_edge\_weight(\&this-\/>edges[j],\ state);}
\DoxyCodeLine{01779\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01780\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}));}
\DoxyCodeLine{01781\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01782\ }
\DoxyCodeLine{01783\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ {\ucr}ȴ{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}߳{\ucr}{\ucr}{\ucr}{\ucr}}}
\DoxyCodeLine{01784\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ \&future\ :\ futures)}
\DoxyCodeLine{01785\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01786\ \ \ \ \ \ \ \ \ \ \ \ \ future.get();}
\DoxyCodeLine{01787\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01788\ \ \ \ \ \}}
\DoxyCodeLine{01789\ }
\DoxyCodeLine{01790\ \ \ \ \ \textcolor{keywordtype}{void}\ activate\_edges(State\ state,\ \textcolor{keywordtype}{string}\ info\ =\ \textcolor{stringliteral}{"{}"{}})}
\DoxyCodeLine{01791\ \ \ \ \ \{}
\DoxyCodeLine{01792\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ int\ activate\ =\ 0;}}
\DoxyCodeLine{01793\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ int\ suspend\ =\ 0;}}
\DoxyCodeLine{01794\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ int\ freeze\ =\ 0;}}
\DoxyCodeLine{01795\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (this-\/>edges\ ==\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{01796\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01797\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ this-\/>edge\_num;\ i++)}
\DoxyCodeLine{01798\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01799\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_edge}{Edge}}\ *e\_ptr\ =\ \&this-\/>edges[i];}
\DoxyCodeLine{01800\ \ \ \ \ \ \ \ \ \ \ \ \ e\_ptr-\/>is\_checked\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{01801\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (e\_ptr-\/>state\ ==\ state)}
\DoxyCodeLine{01802\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01803\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ State\ final\_state;}
\DoxyCodeLine{01804\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (info\ ==\ \textcolor{stringliteral}{"{}"{}})}
\DoxyCodeLine{01805\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ final\_state\ =\ this-\/>activate\_edge(e\_ptr);}
\DoxyCodeLine{01806\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{01807\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ final\_state\ =\ this-\/>activate\_edge\_in\_cycle(e\_ptr);}
\DoxyCodeLine{01808\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01809\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01810\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*switch\ (final\_state)}}
\DoxyCodeLine{01811\ \textcolor{comment}{\ \ \ \ \ \ \ \ \{}}
\DoxyCodeLine{01812\ \textcolor{comment}{\ \ \ \ \ \ \ \ case\ State::Activate:}}
\DoxyCodeLine{01813\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ activate++;}}
\DoxyCodeLine{01814\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ break;}}
\DoxyCodeLine{01815\ \textcolor{comment}{\ \ \ \ \ \ \ \ case\ State::Suspend:}}
\DoxyCodeLine{01816\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ suspend++;}}
\DoxyCodeLine{01817\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ break;}}
\DoxyCodeLine{01818\ \textcolor{comment}{\ \ \ \ \ \ \ \ case\ State::Freeze:}}
\DoxyCodeLine{01819\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ freeze++;}}
\DoxyCodeLine{01820\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ break;}}
\DoxyCodeLine{01821\ \textcolor{comment}{\ \ \ \ \ \ \ \ default:}}
\DoxyCodeLine{01822\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ break;}}
\DoxyCodeLine{01823\ \textcolor{comment}{\ \ \ \ \ \ \ \ \}*/}}
\DoxyCodeLine{01824\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ std::cout\ <<\ "{}Number\ of\ activate\ edges:\ "{}\ <<\ GREEN\_TEXT\ <<\ activate\ <<\ RESET\_COLOR\ <<\ std::endl;}}
\DoxyCodeLine{01825\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ std::cout\ <<\ "{}Number\ of\ still\ suspend\ edges:\ "{}\ <<\ GREEN\_TEXT\ <<\ suspend\ <<\ RESET\_COLOR\ <<\ std::endl;}}
\DoxyCodeLine{01826\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ std::cout\ <<\ "{}Number\ of\ new\ freeze\ edges:\ "{}\ <<\ GREEN\_TEXT\ <<\ freeze\ <<\ RESET\_COLOR\ <<\ std::endl;}}
\DoxyCodeLine{01827\ \ \ \ \ \}}
\DoxyCodeLine{01828\ }
\DoxyCodeLine{01829\ \ \ \ \ State\ activate\_edge(\mbox{\hyperlink{class_edge}{Edge}}\ *e\_ptr)}
\DoxyCodeLine{01830\ \ \ \ \ \{}
\DoxyCodeLine{01831\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ ԭ{\ucr}{\ucr}edge{\ucr}{\ucr}{\ucr}ߵ{\ucr}vertexû{\ucr}б仯{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}}}
\DoxyCodeLine{01832\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (e\_ptr-\/>left\_vertex-\/>state\ ==\ State::Activate\ \&\&\ e\_ptr-\/>right\_vertex-\/>state\ ==\ State::Activate)}
\DoxyCodeLine{01833\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01834\ \ \ \ \ \ \ \ \ \ \ \ \ e\_ptr-\/>left\_vertex-\/>push(e\_ptr);}
\DoxyCodeLine{01835\ \ \ \ \ \ \ \ \ \ \ \ \ e\_ptr-\/>right\_vertex-\/>push(e\_ptr);}
\DoxyCodeLine{01836\ \ \ \ \ \ \ \ \ \ \ \ \ e\_ptr-\/>state\ =\ State::Activate;}
\DoxyCodeLine{01837\ }
\DoxyCodeLine{01838\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ e\_ptr-\/>state;}
\DoxyCodeLine{01839\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01840\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_vertex}{Vertex}}\ *left\_vertex\ =\ e\_ptr-\/>left\_vertex;}
\DoxyCodeLine{01841\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_vertex}{Vertex}}\ *right\_vertex\ =\ e\_ptr-\/>right\_vertex;}
\DoxyCodeLine{01842\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (left\_vertex-\/>parent\ !=\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{01843\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01844\ \ \ \ \ \ \ \ \ \ \ \ \ left\_vertex\ =\ left\_vertex-\/>parent;}
\DoxyCodeLine{01845\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01846\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (right\_vertex-\/>parent\ !=\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{01847\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01848\ \ \ \ \ \ \ \ \ \ \ \ \ right\_vertex\ =\ right\_vertex-\/>parent;}
\DoxyCodeLine{01849\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01850\ }
\DoxyCodeLine{01851\ \ \ \ \ \ \ \ \ e\_ptr-\/>left\_vertex\ =\ left\_vertex;}
\DoxyCodeLine{01852\ \ \ \ \ \ \ \ \ e\_ptr-\/>right\_vertex\ =\ right\_vertex;}
\DoxyCodeLine{01853\ }
\DoxyCodeLine{01854\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ ԭ{\ucr}{\ucr}edge{\ucr}{\ucr}{\ucr}ߵĽڵ{\ucr}ͨ{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}Ӻϲ{\ucr}Ϊһ{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}}}
\DoxyCodeLine{01855\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (e\_ptr-\/>left\_vertex\ ==\ e\_ptr-\/>right\_vertex)}
\DoxyCodeLine{01856\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01857\ \ \ \ \ \ \ \ \ \ \ \ \ e\_ptr-\/>state\ =\ State::Freeze;}
\DoxyCodeLine{01858\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ e\_ptr-\/>state;}
\DoxyCodeLine{01859\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01860\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ {\ucr}ж{\ucr}{\ucr}Ƿ{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}}}
\DoxyCodeLine{01861\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ e\_ptr-\/>left\_vertex-\/>edges.size();\ i++)}
\DoxyCodeLine{01862\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01863\ \ \ \ \ \ \ \ \ \ \ \ \ T2\ *test\_e\ =\ \&this-\/>edges[e\_ptr-\/>left\_vertex-\/>edges[i]];}
\DoxyCodeLine{01864\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (e\_ptr-\/>compareByEnds(*test\_e))\ \textcolor{comment}{//\ {\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}}}
\DoxyCodeLine{01865\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01866\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ test\_e-\/>length\ +=\ e\_ptr-\/>length;}
\DoxyCodeLine{01867\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ e\_ptr-\/>weight\ =\ e\_ptr-\/>weight\ <=\ test\_e-\/>weight\ ?\ e\_ptr-\/>weight\ :\ test\_e-\/>weight;}
\DoxyCodeLine{01868\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ e\_ptr-\/>state\ =\ State::Freeze;}
\DoxyCodeLine{01869\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ e\_ptr-\/>state;}
\DoxyCodeLine{01870\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01871\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01872\ }
\DoxyCodeLine{01873\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ {\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}ȷ{\ucr}{\ucr}e\_ptr{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}ڵ{\ucr}Ψһ{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}}}
\DoxyCodeLine{01874\ \ \ \ \ \ \ \ \ e\_ptr-\/>left\_vertex-\/>push(e\_ptr);}
\DoxyCodeLine{01875\ \ \ \ \ \ \ \ \ e\_ptr-\/>right\_vertex-\/>push(e\_ptr);}
\DoxyCodeLine{01876\ \ \ \ \ \ \ \ \ e\_ptr-\/>weight\ =\ this-\/>merging\_criteria((T\_Feature\ *)e\_ptr-\/>left\_vertex-\/>ptr\_features,\ (T\_Feature\ *)e\_ptr-\/>right\_vertex-\/>ptr\_features,\ (T2\ *)e\_ptr);}
\DoxyCodeLine{01877\ \ \ \ \ \ \ \ \ e\_ptr-\/>state\ =\ State::Activate;}
\DoxyCodeLine{01878\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ e\_ptr-\/>state;}
\DoxyCodeLine{01879\ \ \ \ \ \}}
\DoxyCodeLine{01880\ }
\DoxyCodeLine{01881\ \ \ \ \ std::shared\_mutex\ vertexMutex;\ \textcolor{comment}{//\ {\ucr}{\ucr}{\ucr}ڱ{\ucr}{\ucr}{\ucr}\ Vertex\ {\ucr}{\ucr}{\ucr}{\ucr}}}
\DoxyCodeLine{01882\ \ \ \ \ std::shared\_mutex\ edgeMutex;\ \ \ \textcolor{comment}{//\ {\ucr}{\ucr}{\ucr}ڱ{\ucr}{\ucr}{\ucr}\ Edge\ {\ucr}{\ucr}{\ucr}{\ucr}}}
\DoxyCodeLine{01883\ \ \ \ \ std::shared\_mutex\ edgesMutex;\ \ \textcolor{comment}{//\ {\ucr}{\ucr}{\ucr}ڱ{\ucr}{\ucr}{\ucr}\ this-\/>edges\ {\ucr}{\ucr}{\ucr}{\ucr}}}
\DoxyCodeLine{01884\ \ \ \ \ State\ activate\_edge\_parallel(\mbox{\hyperlink{class_edge}{Edge}}\ *e\_ptr)}
\DoxyCodeLine{01885\ \ \ \ \ \{}
\DoxyCodeLine{01886\ }
\DoxyCodeLine{01887\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (e\_ptr-\/>left\_vertex-\/>state\ ==\ State::Activate\ \&\&\ e\_ptr-\/>right\_vertex-\/>state\ ==\ State::Activate)}
\DoxyCodeLine{01888\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01889\ \ \ \ \ \ \ \ \ \ \ \ \ e\_ptr-\/>left\_vertex-\/>push(e\_ptr);}
\DoxyCodeLine{01890\ \ \ \ \ \ \ \ \ \ \ \ \ e\_ptr-\/>left\_vertex-\/>push(e\_ptr);}
\DoxyCodeLine{01891\ \ \ \ \ \ \ \ \ \ \ \ \ e\_ptr-\/>right\_vertex-\/>push(e\_ptr);}
\DoxyCodeLine{01892\ \ \ \ \ \ \ \ \ \ \ \ \ e\_ptr-\/>state\ =\ State::Activate;}
\DoxyCodeLine{01893\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ e\_ptr-\/>state;}
\DoxyCodeLine{01894\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01895\ }
\DoxyCodeLine{01896\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_vertex}{Vertex}}\ *left\_vertex\ =\ e\_ptr-\/>left\_vertex;}
\DoxyCodeLine{01897\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_vertex}{Vertex}}\ *right\_vertex\ =\ e\_ptr-\/>right\_vertex;}
\DoxyCodeLine{01898\ }
\DoxyCodeLine{01899\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (left\_vertex-\/>parent\ !=\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{01900\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01901\ \ \ \ \ \ \ \ \ \ \ \ \ left\_vertex\ =\ left\_vertex-\/>parent;}
\DoxyCodeLine{01902\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01903\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (right\_vertex-\/>parent\ !=\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{01904\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01905\ \ \ \ \ \ \ \ \ \ \ \ \ right\_vertex\ =\ right\_vertex-\/>parent;}
\DoxyCodeLine{01906\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01907\ \ \ \ \ \ \ \ \ e\_ptr-\/>left\_vertex\ =\ left\_vertex;}
\DoxyCodeLine{01908\ \ \ \ \ \ \ \ \ e\_ptr-\/>right\_vertex\ =\ right\_vertex;}
\DoxyCodeLine{01909\ }
\DoxyCodeLine{01910\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ ԭ{\ucr}{\ucr}edge{\ucr}{\ucr}{\ucr}ߵĽڵ{\ucr}ͨ{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}Ӻϲ{\ucr}Ϊһ{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}\ -\/\ {\ucr}{\ucr}ȡ{\ucr}{\ucr}{\ucr}{\ucr}}}
\DoxyCodeLine{01911\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (e\_ptr-\/>left\_vertex\ ==\ e\_ptr-\/>right\_vertex)}
\DoxyCodeLine{01912\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01913\ \ \ \ \ \ \ \ \ \ \ \ \ e\_ptr-\/>state\ =\ State::Freeze;}
\DoxyCodeLine{01914\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ e\_ptr-\/>state;}
\DoxyCodeLine{01915\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01916\ }
\DoxyCodeLine{01917\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ {\ucr}ж{\ucr}{\ucr}Ƿ{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}\ -\/\ {\ucr}{\ucr}ȡ\ this-\/>edges\ {\ucr}{\ucr}\ e\_ptr-\/>left\_vertex-\/>edges}}
\DoxyCodeLine{01918\ }
\DoxyCodeLine{01919\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ e\_ptr-\/>left\_vertex-\/>edges.size();\ i++)}
\DoxyCodeLine{01920\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01921\ \ \ \ \ \ \ \ \ \ \ \ \ T2\ *test\_e\ =\ \&this-\/>edges[e\_ptr-\/>left\_vertex-\/>edges[i]];}
\DoxyCodeLine{01922\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (e\_ptr-\/>compareByEnds(*test\_e))}
\DoxyCodeLine{01923\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01924\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ test\_e-\/>length\ +=\ e\_ptr-\/>length;}
\DoxyCodeLine{01925\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ e\_ptr-\/>state\ =\ State::Freeze;}
\DoxyCodeLine{01926\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ e\_ptr-\/>state;}
\DoxyCodeLine{01927\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01928\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01929\ }
\DoxyCodeLine{01930\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ {\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}ȷ{\ucr}{\ucr}e\_ptr{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}ڵ{\ucr}Ψһ{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}}}
\DoxyCodeLine{01931\ }
\DoxyCodeLine{01932\ \ \ \ \ \ \ \ \ e\_ptr-\/>left\_vertex-\/>push(e\_ptr);}
\DoxyCodeLine{01933\ \ \ \ \ \ \ \ \ e\_ptr-\/>right\_vertex-\/>push(e\_ptr);}
\DoxyCodeLine{01934\ }
\DoxyCodeLine{01935\ \ \ \ \ \ \ \ \ e\_ptr-\/>weight\ =\ this-\/>merging\_criteria((T\_Feature\ *)e\_ptr-\/>left\_vertex-\/>ptr\_features,\ (T\_Feature\ *)e\_ptr-\/>right\_vertex-\/>ptr\_features,\ (T2\ *)e\_ptr);}
\DoxyCodeLine{01936\ \ \ \ \ \ \ \ \ e\_ptr-\/>state\ =\ State::Activate;}
\DoxyCodeLine{01937\ }
\DoxyCodeLine{01938\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ e\_ptr-\/>state;}
\DoxyCodeLine{01939\ \ \ \ \ \}}
\DoxyCodeLine{01940\ }
\DoxyCodeLine{01941\ \ \ \ \ \mbox{\hyperlink{class_edge}{Edge}}\ *activate\_edges\_in\_region(\mbox{\hyperlink{class_edge}{Edge}}\ *e\_root)}
\DoxyCodeLine{01942\ \ \ \ \ \{}
\DoxyCodeLine{01943\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_edge}{Edge}}\ *new\_e\_root\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{01944\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_edge}{Edge}}\ *nil\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{01945\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (e\_root\ !=\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{01946\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01947\ \ \ \ \ \ \ \ \ \ \ \ \ e\_root-\/>is\_checked\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{01948\ }
\DoxyCodeLine{01949\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (e\_root-\/>state\ !=\ State::Freeze)}
\DoxyCodeLine{01950\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01951\ }
\DoxyCodeLine{01952\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ State\ final\_state\ =\ this-\/>activate\_edge\_in\_cycle(e\_root);}
\DoxyCodeLine{01953\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (new\_e\_root\ ==\ \textcolor{keyword}{nullptr}\ \&\&\ final\_state\ !=\ State::Freeze)}
\DoxyCodeLine{01954\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01955\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ new\_e\_root\ =\ e\_root;}
\DoxyCodeLine{01956\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ nil\ =\ new\_e\_root;}
\DoxyCodeLine{01957\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ e\_root\ =\ e\_root-\/>next\_edge\_in\_region;}
\DoxyCodeLine{01958\ }
\DoxyCodeLine{01959\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01960\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01961\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (final\_state\ !=\ State::Freeze)}
\DoxyCodeLine{01962\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01963\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ nil-\/>next\_edge\_in\_region\ =\ e\_root;}
\DoxyCodeLine{01964\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ nil\ =\ e\_root;}
\DoxyCodeLine{01965\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01966\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01967\ \ \ \ \ \ \ \ \ \ \ \ \ e\_root\ =\ e\_root-\/>next\_edge\_in\_region;}
\DoxyCodeLine{01968\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01969\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (nil\ !=\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{01970\ \ \ \ \ \ \ \ \ \ \ \ \ nil-\/>next\_edge\_in\_region\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{01971\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ \ std::cout\ <<\ "{}Number\ of\ activate\ edges:\ "{}\ <<\ GREEN\_TEXT\ <<\ activate\ <<\ RESET\_COLOR\ <<\ std::endl;}}
\DoxyCodeLine{01972\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ std::cout\ <<\ "{}Number\ of\ still\ suspend\ edges:\ "{}\ <<\ GREEN\_TEXT\ <<\ suspend\ <<\ RESET\_COLOR\ <<\ std::endl;}}
\DoxyCodeLine{01973\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ std::cout\ <<\ "{}Number\ of\ new\ freeze\ edges:\ "{}\ <<\ GREEN\_TEXT\ <<\ freeze\ <<\ RESET\_COLOR\ <<\ std::endl;*/}}
\DoxyCodeLine{01974\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ new\_e\_root;}
\DoxyCodeLine{01975\ \ \ \ \ \}}
\DoxyCodeLine{01976\ }
\DoxyCodeLine{01977\ \ \ \ \ \textcolor{comment}{//\ work}}
\DoxyCodeLine{01978\ \ \ \ \ State\ activate\_edge\_in\_cycle(\mbox{\hyperlink{class_edge}{Edge}}\ *e\_ptr)}
\DoxyCodeLine{01979\ \ \ \ \ \{}
\DoxyCodeLine{01980\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ ԭ{\ucr}{\ucr}edge{\ucr}{\ucr}{\ucr}ߵ{\ucr}vertexû{\ucr}б仯{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}}}
\DoxyCodeLine{01981\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (e\_ptr-\/>left\_vertex-\/>state\ ==\ State::Activate\ \&\&\ e\_ptr-\/>right\_vertex-\/>state\ ==\ State::Activate)}
\DoxyCodeLine{01982\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01983\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Vertex\ didnot\ remove\ any\ edges\ in\ cycle\ optimisation\ method.Thus,\ No\ need\ to\ push\ edge\ to\ vertex\ here.}}
\DoxyCodeLine{01984\ \ \ \ \ \ \ \ \ \ \ \ \ e\_ptr-\/>state\ =\ State::Activate;}
\DoxyCodeLine{01985\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ e\_ptr-\/>state;}
\DoxyCodeLine{01986\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01987\ }
\DoxyCodeLine{01988\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ The\ vertex\ ends\ of\ the\ edge\ changed}}
\DoxyCodeLine{01989\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_vertex}{Vertex}}\ *left\_vertex\ =\ e\_ptr-\/>left\_vertex;}
\DoxyCodeLine{01990\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_vertex}{Vertex}}\ *right\_vertex\ =\ e\_ptr-\/>right\_vertex;}
\DoxyCodeLine{01991\ }
\DoxyCodeLine{01992\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ test\ =\ 0;}
\DoxyCodeLine{01993\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (left\_vertex-\/>parent\ !=\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{01994\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01995\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (left\_vertex-\/>state\ !=\ State::Freeze)}
\DoxyCodeLine{01996\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01997\ }
\DoxyCodeLine{01998\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ test++;}
\DoxyCodeLine{01999\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ std::runtime\_error(\textcolor{stringliteral}{"{}State\ error!"{}});}
\DoxyCodeLine{02000\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02001\ \ \ \ \ \ \ \ \ \ \ \ \ left\_vertex\ =\ left\_vertex-\/>parent;}
\DoxyCodeLine{02002\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02003\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (right\_vertex-\/>parent\ !=\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{02004\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02005\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (right\_vertex-\/>state\ !=\ State::Freeze)}
\DoxyCodeLine{02006\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02007\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ test++;}
\DoxyCodeLine{02008\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ std::runtime\_error(\textcolor{stringliteral}{"{}State\ error!"{}});}
\DoxyCodeLine{02009\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02010\ \ \ \ \ \ \ \ \ \ \ \ \ right\_vertex\ =\ right\_vertex-\/>parent;}
\DoxyCodeLine{02011\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02012\ }
\DoxyCodeLine{02013\ \ \ \ \ \ \ \ \ e\_ptr-\/>left\_vertex\ =\ left\_vertex;}
\DoxyCodeLine{02014\ \ \ \ \ \ \ \ \ e\_ptr-\/>right\_vertex\ =\ right\_vertex;}
\DoxyCodeLine{02015\ }
\DoxyCodeLine{02016\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ ԭ{\ucr}{\ucr}edge{\ucr}{\ucr}{\ucr}ߵĽڵ{\ucr}ͨ{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}Ӻϲ{\ucr}Ϊһ{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}}}
\DoxyCodeLine{02017\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (e\_ptr-\/>left\_vertex\ ==\ e\_ptr-\/>right\_vertex)}
\DoxyCodeLine{02018\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02019\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Though\ vertex\ doesnot\ contation\ e\_ptr,\ the\ code\ is\ safe.\ It\ means\ removing\ nothing.}}
\DoxyCodeLine{02020\ \ \ \ \ \ \ \ \ \ \ \ \ e\_ptr-\/>left\_vertex-\/>remove\_edge(e\_ptr-\/>ID);}
\DoxyCodeLine{02021\ \ \ \ \ \ \ \ \ \ \ \ \ e\_ptr-\/>right\_vertex-\/>remove\_edge(e\_ptr-\/>ID);}
\DoxyCodeLine{02022\ \ \ \ \ \ \ \ \ \ \ \ \ e\_ptr-\/>state\ =\ State::Freeze;}
\DoxyCodeLine{02023\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ e\_ptr-\/>state;}
\DoxyCodeLine{02024\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02025\ }
\DoxyCodeLine{02026\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ {\ucr}ж{\ucr}{\ucr}Ƿ{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}\ {\ucr}{\ucr}{\ucr}ܻ{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}}}
\DoxyCodeLine{02027\ \ \ \ \ \ \ \ \ V\_E\_Topo\_correct(e\_ptr,\ e\_ptr-\/>left\_vertex);}
\DoxyCodeLine{02028\ \ \ \ \ \ \ \ \ V\_E\_Topo\_correct(e\_ptr,\ e\_ptr-\/>right\_vertex);}
\DoxyCodeLine{02029\ }
\DoxyCodeLine{02030\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (e\_ptr-\/>state\ ==\ State::Freeze)}
\DoxyCodeLine{02031\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ e\_ptr-\/>state;}
\DoxyCodeLine{02032\ }
\DoxyCodeLine{02033\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ {\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}ȷ{\ucr}{\ucr}e\_ptr{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}ڵ{\ucr}Ψһ{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}}}
\DoxyCodeLine{02034\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ e\_ptr-\/>weight\ =\ this-\/>merging\_criteria((T\_Feature*)e\_ptr-\/>left\_vertex-\/>ptr\_features,\ (T\_Feature*)e\_ptr-\/>right\_vertex-\/>ptr\_features,\ (T2*)e\_ptr);}}
\DoxyCodeLine{02035\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ e\_ptr-\/>state\ =\ State::Activate;}}
\DoxyCodeLine{02036\ \ \ \ \ \ \ \ \ e\_ptr-\/>state\ =\ State::Suspend;}
\DoxyCodeLine{02037\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ e\_ptr-\/>state;}
\DoxyCodeLine{02038\ \ \ \ \ \}}
\DoxyCodeLine{02039\ }
\DoxyCodeLine{02040\ \ \ \ \ \textcolor{keywordtype}{void}\ V\_E\_Topo\_correct(\mbox{\hyperlink{class_edge}{Edge}}\ *e\_ptr,\ \mbox{\hyperlink{class_vertex}{Vertex}}\ *v\_of\_E\_ends)}
\DoxyCodeLine{02041\ \ \ \ \ \{}
\DoxyCodeLine{02042\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (e\_ptr-\/>state\ ==\ State::Freeze)}
\DoxyCodeLine{02043\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02044\ \ \ \ \ \ \ \ \ \ \ \ \ v\_of\_E\_ends-\/>remove\_edge(e\_ptr-\/>ID);}
\DoxyCodeLine{02045\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{02046\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02047\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ equal\_num\ =\ 0;}
\DoxyCodeLine{02048\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_edge}{Edge}}\ *existed\_other\_edge\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{02049\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ is\_existed\_same\_edge\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{02050\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ v\_of\_E\_ends-\/>edges.size();\ i++)}
\DoxyCodeLine{02051\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02052\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_edge}{Edge}}\ *test\_e\ =\ \&this-\/>edges[v\_of\_E\_ends-\/>edges[i]];}
\DoxyCodeLine{02053\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (e\_ptr-\/>compareByEnds(*test\_e))\ \textcolor{comment}{//\ {\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}{\ucr}}}
\DoxyCodeLine{02054\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02055\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (e\_ptr-\/>compareByAddress(*test\_e))}
\DoxyCodeLine{02056\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ is\_existed\_same\_edge\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{02057\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{02058\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ existed\_other\_edge\ =\ test\_e;}
\DoxyCodeLine{02059\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ equal\_num++;}
\DoxyCodeLine{02060\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02061\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02062\ }
\DoxyCodeLine{02063\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (equal\_num)}
\DoxyCodeLine{02064\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02065\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 0:}
\DoxyCodeLine{02066\ \ \ \ \ \ \ \ \ \ \ \ \ v\_of\_E\_ends-\/>push(e\_ptr);}
\DoxyCodeLine{02067\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{02068\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 1:}
\DoxyCodeLine{02069\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (existed\_other\_edge\ !=\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{02070\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02071\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ existed\_other\_edge-\/>length\ +=\ e\_ptr-\/>length;}
\DoxyCodeLine{02072\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ existed\_other\_edge-\/>weight\ =\ existed\_other\_edge-\/>weight\ <=\ e\_ptr-\/>weight\ ?\ existed\_other\_edge-\/>weight\ :\ e\_ptr-\/>weight;}
\DoxyCodeLine{02073\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ e\_ptr-\/>state\ =\ State::Freeze;}
\DoxyCodeLine{02074\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ v\_of\_E\_ends-\/>remove\_edge(e\_ptr-\/>ID);\ \textcolor{comment}{//\ In\ pratical,\ v\_of\_E\_ends\ has\ no\ edge*\ e\_ptr}}
\DoxyCodeLine{02075\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02076\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{02077\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 2:}
\DoxyCodeLine{02078\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (is\_existed\_same\_edge\ ==\ \textcolor{keyword}{true}\ \&\&\ existed\_other\_edge\ !=\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{02079\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02080\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ existed\_other\_edge-\/>length\ +=\ e\_ptr-\/>length;}
\DoxyCodeLine{02081\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ existed\_other\_edge-\/>weight\ =\ existed\_other\_edge-\/>weight\ <=\ e\_ptr-\/>weight\ ?\ existed\_other\_edge-\/>weight\ :\ e\_ptr-\/>weight;}
\DoxyCodeLine{02082\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ e\_ptr-\/>state\ =\ State::Freeze;}
\DoxyCodeLine{02083\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ v\_of\_E\_ends-\/>remove\_edge(e\_ptr-\/>ID);}
\DoxyCodeLine{02084\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02085\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{02086\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02087\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ std::runtime\_error(\textcolor{stringliteral}{"{}Wrong\ linked\ edges!"{}});}
\DoxyCodeLine{02088\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02089\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{02090\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{02091\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ std::runtime\_error(\textcolor{stringliteral}{"{}Wrong\ linked\ edges!"{}});}
\DoxyCodeLine{02092\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{02093\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02094\ \ \ \ \ \}}
\DoxyCodeLine{02095\ }
\DoxyCodeLine{02096\ \ \ \ \ \textcolor{keywordtype}{void}\ propagating\_color(T1\ *v)}
\DoxyCodeLine{02097\ \ \ \ \ \{}
\DoxyCodeLine{02098\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ color\ =\ v-\/>color;}
\DoxyCodeLine{02099\ \ \ \ \ \ \ \ \ T1\ *SIL\ =\ v;}
\DoxyCodeLine{02100\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (SIL\ !=\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{02101\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02102\ \ \ \ \ \ \ \ \ \ \ \ \ SIL-\/>color\ =\ color;}
\DoxyCodeLine{02103\ \ \ \ \ \ \ \ \ \ \ \ \ SIL\ =\ (T1\ *)SIL-\/>next;}
\DoxyCodeLine{02104\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ SIL\ =\ (T1*)SIL-\/>next\_in\_region;}}
\DoxyCodeLine{02105\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02106\ \ \ \ \ \}}
\DoxyCodeLine{02107\ }
\DoxyCodeLine{02108\ \ \ \ \ \textcolor{comment}{//\ int\ test\ =\ 0;}}
\DoxyCodeLine{02109\ \textcolor{keyword}{public}:}
\DoxyCodeLine{02110\ \ \ \ \ \textcolor{keywordtype}{void}\ initial\_vertex\_color()\ \textcolor{comment}{//\ WP\ coloring\ method}}
\DoxyCodeLine{02111\ \ \ \ \ \{}
\DoxyCodeLine{02112\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ this-\/>check\_ouput\_num();}}
\DoxyCodeLine{02113\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ this-\/>check\_single\_vertex();}}
\DoxyCodeLine{02114\ \ \ \ \ \ \ \ \ this-\/>activate\_edges(State::Freeze);}
\DoxyCodeLine{02115\ \ \ \ \ \ \ \ \ this-\/>activate\_edges(State::Suspend);}
\DoxyCodeLine{02116\ }
\DoxyCodeLine{02117\ \ \ \ \ \ \ \ \ this-\/>check\_ouput\_num();}
\DoxyCodeLine{02118\ }
\DoxyCodeLine{02119\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ this-\/>vertice\_num;\ i++)}
\DoxyCodeLine{02120\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02121\ \ \ \ \ \ \ \ \ \ \ \ \ T1\ *v\ =\ \&this-\/>vertice[i];}
\DoxyCodeLine{02122\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (v-\/>state\ !=\ State::Freeze)}
\DoxyCodeLine{02123\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02124\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ test\_size\ +=\ v-\/>size;}}
\DoxyCodeLine{02125\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>max\_priqueue.push(v);}
\DoxyCodeLine{02126\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02127\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02128\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ std::cout\ <<\ "{}output\ size:\ "{}\ <<\ test\_size\ <<\ std::endl;}}
\DoxyCodeLine{02129\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ color\_num\ =\ max\_priqueue.top()-\/>edges.size();}
\DoxyCodeLine{02130\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ *color\_arr\ =\ \textcolor{keyword}{new}\ \textcolor{keywordtype}{int}[color\_num];}
\DoxyCodeLine{02131\ }
\DoxyCodeLine{02132\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (!this-\/>max\_priqueue.empty())}
\DoxyCodeLine{02133\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02134\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ std::cout\ <<\ this-\/>max\_priqueue.size()\ <<\ std::endl;}}
\DoxyCodeLine{02135\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ color\_num;\ i++)}
\DoxyCodeLine{02136\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02137\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ color\_arr[i]\ =\ -\/1;}
\DoxyCodeLine{02138\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02139\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ T1\ *const\_ptr\ =\ max\_priqueue.top();}
\DoxyCodeLine{02140\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ T1\ \&const\_v\ =\ *const\_ptr;}
\DoxyCodeLine{02141\ \ \ \ \ \ \ \ \ \ \ \ \ T1\ *v\ =\ \&this-\/>vertice[const\_v.ID];}
\DoxyCodeLine{02142\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ color\ =\ -\/1;}
\DoxyCodeLine{02143\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (v-\/>size\ ==\ 0)}
\DoxyCodeLine{02144\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ color\ =\ 0;}
\DoxyCodeLine{02145\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ edge\_size\ =\ v-\/>edges.size();}
\DoxyCodeLine{02146\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ edge\_size;\ i++)}
\DoxyCodeLine{02147\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02148\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_edge}{Edge}}\ *e\ =\ \&this-\/>edges[v-\/>edges[i]];}
\DoxyCodeLine{02149\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ T1\ *other\_v\ =\ (T1\ *)e-\/>get\_other\_vertex(v);}
\DoxyCodeLine{02150\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (other\_v-\/>color\ >\ -\/1)}
\DoxyCodeLine{02151\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02152\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ color\_arr[other\_v-\/>color]++;}
\DoxyCodeLine{02153\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02154\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02155\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ color\_num;\ i++)}
\DoxyCodeLine{02156\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02157\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (color\_arr[i]\ ==\ -\/1)}
\DoxyCodeLine{02158\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02159\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ color\ =\ i;}
\DoxyCodeLine{02160\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{02161\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02162\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02163\ }
\DoxyCodeLine{02164\ \ \ \ \ \ \ \ \ \ \ \ \ v-\/>color\ =\ color;}
\DoxyCodeLine{02165\ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>propagating\_color(v);}
\DoxyCodeLine{02166\ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>max\_priqueue.pop();}
\DoxyCodeLine{02167\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02168\ \ \ \ \ \ \ \ \ \textcolor{keyword}{delete}[]\ color\_arr;}
\DoxyCodeLine{02169\ \ \ \ \ \}}
\DoxyCodeLine{02170\ }
\DoxyCodeLine{02171\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ connect\_vertex\_and\_edge()\ =\ 0;}
\DoxyCodeLine{02172\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ output(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *)\ =\ 0;}
\DoxyCodeLine{02173\ }
\DoxyCodeLine{02174\ \textcolor{keyword}{public}:}
\DoxyCodeLine{02175\ \ \ \ \ \textcolor{keywordtype}{int}\ test\ =\ 0;}
\DoxyCodeLine{02176\ \ \ \ \ UpdateFeatures\ update\_features\_func;}
\DoxyCodeLine{02177\ \ \ \ \ MergingCriteria\ merging\_criteria;}
\DoxyCodeLine{02178\ \ \ \ \ T1\ *vertice;}
\DoxyCodeLine{02179\ \ \ \ \ T2\ *edges;}
\DoxyCodeLine{02180\ \ \ \ \ \mbox{\hyperlink{class_n_n_g}{NNG}}\ *nng\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{02181\ \ \ \ \ std::priority\_queue<T1\ *,\ std::vector<T1\ *>,\ \mbox{\hyperlink{struct_compare_a_pointers}{CompareAPointers}}>\ max\_priqueue;}
\DoxyCodeLine{02182\ \ \ \ \ \textcolor{keywordtype}{int}\ edge\_num;}
\DoxyCodeLine{02183\ \ \ \ \ \textcolor{keywordtype}{int}\ vertice\_num;}
\DoxyCodeLine{02184\ \};}

\end{DoxyCode}
